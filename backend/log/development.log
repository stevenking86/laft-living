DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (102.1ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35mSQL (0.3ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (180.7ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (58.6ms)[0m  [1m[35mCREATE DATABASE "laft_test" ENCODING = 'unicode'[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-10-14 20:37:01.066951', '2025-10-14 20:37:01.066953') RETURNING "key"[0m
Migrating to CreateUsers (1)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('1') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePosts (2)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "posts" ("id" bigserial primary key, "title" character varying NOT NULL, "content" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_5b5ddfd518"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_posts_on_user_id" ON "posts" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('2') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mPost Load (0.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "John Doe"], ["email", "john@example.com"], ["created_at", "2025-10-14 20:37:08.455826"], ["updated_at", "2025-10-14 20:37:08.455826"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jane Smith"], ["email", "jane@example.com"], ["created_at", "2025-10-14 20:37:08.460367"], ["updated_at", "2025-10-14 20:37:08.460367"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bob@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Bob Johnson"], ["email", "bob@example.com"], ["created_at", "2025-10-14 20:37:08.463834"], ["updated_at", "2025-10-14 20:37:08.463834"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (2.4ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Welcome to our blog!"], ["content", "This is our first post. We're excited to share our thoughts with you."], ["user_id", 1], ["created_at", "2025-10-14 20:37:08.472138"], ["updated_at", "2025-10-14 20:37:08.472138"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (1.0ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Getting Started with Rails"], ["content", "Rails is a powerful web framework for Ruby. Here's how to get started."], ["user_id", 2], ["created_at", "2025-10-14 20:37:08.476038"], ["updated_at", "2025-10-14 20:37:08.476038"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (0.8ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Next.js Best Practices"], ["content", "Next.js is a React framework that makes building web applications easier."], ["user_id", 3], ["created_at", "2025-10-14 20:37:08.478299"], ["updated_at", "2025-10-14 20:37:08.478299"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (0.9ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "Full-Stack Development"], ["content", "Combining Rails and Next.js creates a powerful full-stack application."], ["user_id", 1], ["created_at", "2025-10-14 20:37:08.480675"], ["updated_at", "2025-10-14 20:37:08.480675"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Create (0.8ms)[0m  [1m[32mINSERT INTO "posts" ("title", "content", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["title", "API Design"], ["content", "Good API design is crucial for building scalable applications."], ["user_id", 2], ["created_at", "2025-10-14 20:37:08.482853"], ["updated_at", "2025-10-14 20:37:08.482853"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mPost Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts"[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/" for ::1 at 2025-10-14 21:51:34 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as */*
  Rendering /opt/homebrew/lib/ruby/gems/3.4.0/gems/railties-8.0.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /opt/homebrew/lib/ruby/gems/3.4.0/gems/railties-8.0.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/posts" for 127.0.0.1 at 2025-10-14 21:51:40 +0100
Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:51:40 +0100
  
NoMethodError (undefined method 'protect_from_forgery' for class ApplicationController):
  
app/controllers/application_controller.rb:3:in '<class:ApplicationController>'
app/controllers/application_controller.rb:1:in '<top (required)>'
app/controllers/api/v1/posts_controller.rb:1:in '<top (required)>'
  
NoMethodError (undefined method 'protect_from_forgery' for class ApplicationController):
  
app/controllers/application_controller.rb:3:in '<class:ApplicationController>'
app/controllers/application_controller.rb:1:in '<top (required)>'
app/controllers/api/v1/users_controller.rb:1:in '<top (required)>'
Started GET "/api/v1/posts" for ::1 at 2025-10-14 21:52:29 +0100
Processing by Api::V1::PostsController#index as */*
  [1m[36mPost Load (15.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts"[0m
  â†³ app/controllers/api/v1/posts_controller.rb:7:in 'Api::V1::PostsController#index'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  â†³ app/controllers/api/v1/posts_controller.rb:7:in 'Api::V1::PostsController#index'
Completed 200 OK in 63ms (Views: 11.3ms | ActiveRecord: 38.2ms (2 queries, 0 cached) | GC: 2.5ms)


Started GET "/api/v1/users" for ::1 at 2025-10-14 21:52:30 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:52:35 +0100
Started GET "/api/v1/posts" for 127.0.0.1 at 2025-10-14 21:52:35 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
Processing by Api::V1::PostsController#index as */*
  Parameters: {"post" => {}}
  [1m[36mPost Load (0.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts"[0m
  â†³ app/controllers/api/v1/posts_controller.rb:7:in 'Api::V1::PostsController#index'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  â†³ app/controllers/api/v1/posts_controller.rb:7:in 'Api::V1::PostsController#index'
Completed 200 OK in 12ms (Views: 6.8ms | ActiveRecord: 6.6ms (2 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (18.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 20ms (Views: -6.5ms | ActiveRecord: 31.9ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to DropPosts (20251014205711)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mDROP TABLE "posts"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251014205711') RETURNING "version"[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:57:26 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 19ms (Views: 11.8ms | ActiveRecord: 37.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:57:29 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:57:30 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for 127.0.0.1 at 2025-10-14 21:57:36 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 11ms (Views: 5.9ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (31.0ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE DATABASE "laft_test" ENCODING = 'unicode'[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "John Doe"], ["email", "john@example.com"], ["created_at", "2025-10-15 07:26:19.655964"], ["updated_at", "2025-10-15 07:26:19.655964"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jane Smith"], ["email", "jane@example.com"], ["created_at", "2025-10-15 07:26:19.660728"], ["updated_at", "2025-10-15 07:26:19.660728"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bob@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Bob Johnson"], ["email", "bob@example.com"], ["created_at", "2025-10-15 07:26:19.664281"], ["updated_at", "2025-10-15 07:26:19.664281"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (27.4ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE DATABASE "laft_test" ENCODING = 'unicode'[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "John Doe"], ["email", "john@example.com"], ["created_at", "2025-10-15 07:39:22.419154"], ["updated_at", "2025-10-15 07:39:22.419154"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jane Smith"], ["email", "jane@example.com"], ["created_at", "2025-10-15 07:39:22.422194"], ["updated_at", "2025-10-15 07:39:22.422194"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bob@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Bob Johnson"], ["email", "bob@example.com"], ["created_at", "2025-10-15 07:39:22.425134"], ["updated_at", "2025-10-15 07:39:22.425134"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/" for ::1 at 2025-10-15 08:40:38 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as */*
  Rendering /opt/homebrew/lib/ruby/gems/3.4.0/gems/railties-8.0.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /opt/homebrew/lib/ruby/gems/3.4.0/gems/railties-8.0.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 2.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddPasswordDigestToUsers (20251015135948)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "users" ADD "password_digest" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015135948') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/users" for ::1 at 2025-10-15 15:00:38 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
LoadError (cannot load such file -- bcrypt):
  
app/models/user.rb:2:in '<class:User>'
app/models/user.rb:1:in '<top (required)>'
Started POST "/api/v1/users" for ::1 at 2025-10-15 15:00:46 +0100
  
LoadError (cannot load such file -- bcrypt):
  
app/models/user.rb:2:in '<class:User>'
app/models/user.rb:1:in '<top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ test_auth.rb:18:in '<main>'
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@example.com"], ["LIMIT", 1]]
  â†³ test_auth.rb:18:in '<main>'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test User"], ["email", "test@example.com"], ["created_at", "2025-10-15 14:13:29.743984"], ["updated_at", "2025-10-15 14:13:29.743984"], ["password_digest", "$2a$12$qlxXzY2y6Eb4WL09AwTAc.yTIfXMw/ekxtZrvSvXHb42b9AjMnbrO"]]
  â†³ test_auth.rb:18:in '<main>'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ test_auth.rb:18:in '<main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ test_auth.rb:52:in '<main>'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "short@example.com"], ["LIMIT", 1]]
  â†³ test_auth.rb:52:in '<main>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ test_auth.rb:52:in '<main>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:27:37 +0100
Processing by Api::V1::UsersController#index as */*
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
LoadError (cannot load such file -- bcrypt):
  
app/models/user.rb:2:in '<class:User>'
app/models/user.rb:1:in '<top (required)>'
app/controllers/api/v1/users_controller.rb:6:in 'Api::V1::UsersController#index'
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:27:45 +0100
Processing by Api::V1::UsersController#index as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


  
LoadError (cannot load such file -- bcrypt):
  
app/models/user.rb:2:in '<class:User>'
app/models/user.rb:1:in '<top (required)>'
app/controllers/api/v1/users_controller.rb:6:in 'Api::V1::UsersController#index'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:27:56 +0100
Processing by Api::V1::UsersController#index as */*
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
LoadError (cannot load such file -- bcrypt):
  
app/models/user.rb:2:in '<class:User>'
app/models/user.rb:1:in '<top (required)>'
app/controllers/api/v1/users_controller.rb:6:in 'Api::V1::UsersController#index'
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:28:09 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (14.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 33ms (Views: -1.3ms | ActiveRecord: 29.1ms (1 query, 0 cached) | GC: 0.1ms)


Started POST "/api/v1/users" for ::1 at 2025-10-15 15:28:12 +0100
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Test User 2", "email" => "test2@example.com", "password" => "password123", "password_confirmation" => "password123"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.)
Caused by: NoMethodError (undefined method 'password=' for an instance of User)

Information for: ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):
  
app/controllers/api/v1/users_controller.rb:17:in 'Api::V1::UsersController#create'

Information for cause: NoMethodError (undefined method 'password=' for an instance of User):
  
app/controllers/api/v1/users_controller.rb:17:in 'Api::V1::UsersController#create'
Started POST "/api/v1/users" for ::1 at 2025-10-15 15:28:18 +0100
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Test User 2", "email" => "test2@example.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test2@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Test User 2"], ["email", "test2@example.com"], ["created_at", "2025-10-15 14:28:18.162551"], ["updated_at", "2025-10-15 14:28:18.162551"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 13.4ms (2 queries, 0 cached) | GC: 0.1ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/api/v1/users_controller.rb:21:in 'Api::V1::UsersController#create'
Started POST "/api/v1/users" for ::1 at 2025-10-15 15:28:26 +0100
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Test User 2", "email" => "test2@example.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test2@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 422 Unprocessable Content in 19ms (Views: 1.6ms | ActiveRecord: 8.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/users" for ::1 at 2025-10-15 15:28:28 +0100
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "New User", "email" => "newuser@example.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "newuser@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "New User"], ["email", "newuser@example.com"], ["created_at", "2025-10-15 14:28:28.895728"], ["updated_at", "2025-10-15 14:28:28.895728"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 4ms (Views: 0.1ms | ActiveRecord: 2.1ms (2 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:30:31 +0100
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 54ms (Views: -0.3ms | ActiveRecord: 40.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for ::1 at 2025-10-15 15:30:37 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 7ms (Views: 3.0ms | ActiveRecord: 2.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for ::1 at 2025-10-15 15:31:38 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for ::1 at 2025-10-15 15:31:59 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 8ms (Views: 5.3ms | ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:34:13 +0100
Processing by Api::V1::UsersController#index as */*
  Parameters: {"user" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:34:28 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:34:45 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:34:59 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/users" for ::1 at 2025-10-15 15:35:09 +0100
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 10ms (Views: 3.5ms | ActiveRecord: 5.1ms (1 query, 0 cached) | GC: 0.3ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/users" for ::1 at 2025-10-15 15:37:17 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#index as */*
  [1m[36mUser Load (12.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/controllers/api/v1/users_controller.rb:7:in 'Api::V1::UsersController#index'
Completed 200 OK in 34ms (Views: -0.4ms | ActiveRecord: 26.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-15 15:37:55 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 0.1ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/users" for 127.0.0.1 at 2025-10-15 15:38:22 +0100
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Steven GK", "email" => "stevenking86@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}}
[31mUnpermitted parameters: :password, :password_confirmation. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x000000012ee77780>, params: {"user" => {"name" => "Steven GK", "email" => "stevenking86@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}, "controller" => "api/v1/users", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Steven GK"], ["email", "stevenking86@gmail.com"], ["created_at", "2025-10-15 14:38:22.201839"], ["updated_at", "2025-10-15 14:38:22.201839"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 29ms (Views: 0.2ms | ActiveRecord: 13.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/logout" for 127.0.0.1 at 2025-10-15 15:38:27 +0100
Processing by Api::V1::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-15 15:38:38 +0100
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "password", "auth" => {"email" => "stevenking86@gmail.com", "password" => "password"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/logout" for 127.0.0.1 at 2025-10-15 16:45:06 +0100
Processing by Api::V1::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 20ms (Views: 0.1ms | ActiveRecord: 9.1ms (1 query, 0 cached) | GC: 0.1ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateProperties (20251015185703)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.4ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "name" character varying NOT NULL, "address" text NOT NULL, "office_hours" text, "pets_allowed" boolean DEFAULT FALSE NOT NULL, "has_parking" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185703') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUnits (20251015185716)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "units" ("id" bigserial primary key, "property_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7df365ccb"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_units_on_property_id" ON "units" ("property_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185716') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRentalApplications (20251015185728)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "rental_applications" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "move_in_date" date NOT NULL, "term" integer NOT NULL, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e257d0e090"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3875d631ab"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
, CONSTRAINT "fk_rails_8e7d957e39"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_user_id" ON "rental_applications" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_property_id" ON "rental_applications" ("property_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_id" ON "rental_applications" ("unit_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_status" ON "rental_applications" ("status")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185728') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVerifications (20251015185751)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "verifications" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "user_id" bigint NOT NULL, "is_verified" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_23e64a9325"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
, CONSTRAINT "fk_rails_f184078eb4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_rental_application_id" ON "verifications" ("rental_application_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_user_id" ON "verifications" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185751') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLeases (20251015185806)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "leases" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "signed" boolean DEFAULT FALSE NOT NULL, "signed_date" date, "move_in_date" date NOT NULL, "move_out_date" date, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_5e2c35a820"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
, CONSTRAINT "fk_rails_170c7116c8"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
, CONSTRAINT "fk_rails_29210439a5"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_leases_on_rental_application_id" ON "leases" ("rental_application_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_leases_on_property_id" ON "leases" ("property_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_leases_on_unit_id" ON "leases" ("unit_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_leases_on_move_in_date" ON "leases" ("move_in_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185806') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePayments (20251015185821)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "lease_id" bigint NOT NULL, "amount" decimal(8,2) NOT NULL, "due_date" date NOT NULL, "paid_date" date, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_081dc04a02"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_b77711b98f"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_user_id" ON "payments" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_payments_on_lease_id" ON "payments" ("lease_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_due_date" ON "payments" ("due_date")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_payments_on_status" ON "payments" ("status")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185821') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateLeaseTenants (20251015185838)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "lease_tenants" ("id" bigserial primary key, "lease_id" bigint NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_df3043dbd4"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
, CONSTRAINT "fk_rails_bb0cf78ab5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_lease_id" ON "lease_tenants" ("lease_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_user_id" ON "lease_tenants" ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_lease_tenants_on_lease_id_and_user_id" ON "lease_tenants" ("lease_id", "user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251015185838') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (3.3ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-10-15 20:08:11.371240"], ["updated_at", "2025-10-15 20:08:11.371240"]]
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (4.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "Unit 101"], ["created_at", "2025-10-15 20:08:11.390228"], ["updated_at", "2025-10-15 20:08:11.390228"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (1.0ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "Unit 102"], ["created_at", "2025-10-15 20:08:11.395984"], ["updated_at", "2025-10-15 20:08:11.395984"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "Unit 103"], ["created_at", "2025-10-15 20:08:11.398434"], ["updated_at", "2025-10-15 20:08:11.398434"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-10-15 20:08:11.411629"], ["updated_at", "2025-10-15 20:08:11.411629"]]
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 2], ["name", "Unit 201"], ["created_at", "2025-10-15 20:08:11.413722"], ["updated_at", "2025-10-15 20:08:11.413722"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 2], ["name", "Unit 202"], ["created_at", "2025-10-15 20:08:11.415170"], ["updated_at", "2025-10-15 20:08:11.415170"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 2]]
  â†³ lib/tasks/fake_data.rake:53:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  â†³ lib/tasks/fake_data.rake:55:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  â†³ lib/tasks/fake_data.rake:56:in 'block (2 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."name" IN ($1, $2) LIMIT $3[0m  [["name", "The Meadows"], ["name", "Cassidy South"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:70:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."name" IN ($1, $2)[0m  [["name", "The Meadows"], ["name", "Cassidy South"]]
  â†³ lib/tasks/fake_data.rake:78:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:79:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."name" IN ($1, $2) LIMIT $3[0m  [["name", "The Meadows"], ["name", "Cassidy South"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:70:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."name" IN ($1, $2)[0m  [["name", "The Meadows"], ["name", "Cassidy South"]]
  â†³ lib/tasks/fake_data.rake:78:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:79:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (1.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (3.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (2.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.5ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 3]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 3]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 3]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 2]]
  â†³ lib/tasks/fake_data.rake:79:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 4]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 4]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.5ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 4]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 5]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 5]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 5]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (0.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 2]]
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:81:in 'block (3 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (1.4ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-10-15 20:08:23.598579"], ["updated_at", "2025-10-15 20:08:23.598579"]]
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (1.5ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 3], ["name", "Unit 101"], ["created_at", "2025-10-15 20:08:23.615125"], ["updated_at", "2025-10-15 20:08:23.615125"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 3], ["name", "Unit 102"], ["created_at", "2025-10-15 20:08:23.617803"], ["updated_at", "2025-10-15 20:08:23.617803"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 3], ["name", "Unit 103"], ["created_at", "2025-10-15 20:08:23.620083"], ["updated_at", "2025-10-15 20:08:23.620083"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-10-15 20:08:23.630973"], ["updated_at", "2025-10-15 20:08:23.630973"]]
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 4], ["name", "Unit 201"], ["created_at", "2025-10-15 20:08:23.632906"], ["updated_at", "2025-10-15 20:08:23.632906"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 4], ["name", "Unit 202"], ["created_at", "2025-10-15 20:08:23.634547"], ["updated_at", "2025-10-15 20:08:23.634547"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 4]]
  â†³ lib/tasks/fake_data.rake:53:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  â†³ lib/tasks/fake_data.rake:55:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  â†³ lib/tasks/fake_data.rake:56:in 'block (2 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" ORDER BY "properties"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-15 21:53:22 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (3.0ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 09:46:48 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 30ms (Views: 0.2ms | ActiveRecord: 32.1ms (1 query, 0 cached) | GC: 0.8ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-17 09:46:53 +0100
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (4.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 09:52:13 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 19ms (Views: 0.2ms | ActiveRecord: 13.0ms (1 query, 0 cached) | GC: 0.2ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-17 09:52:19 +0100
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mLease Load (20.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 09:53:51 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.1ms | ActiveRecord: 5.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 09:54:09 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 17ms (Views: 2.2ms | ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (3.6ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-10-17 08:54:12.261692"], ["updated_at", "2025-10-17 08:54:12.261692"]]
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (2.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 5], ["name", "Unit 101"], ["created_at", "2025-10-17 08:54:12.279591"], ["updated_at", "2025-10-17 08:54:12.279591"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 5], ["name", "Unit 102"], ["created_at", "2025-10-17 08:54:12.284150"], ["updated_at", "2025-10-17 08:54:12.284150"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 5], ["name", "Unit 103"], ["created_at", "2025-10-17 08:54:12.286097"], ["updated_at", "2025-10-17 08:54:12.286097"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 5]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-10-17 08:54:12.297170"], ["updated_at", "2025-10-17 08:54:12.297170"]]
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:32:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (1.4ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 6], ["name", "Unit 201"], ["created_at", "2025-10-17 08:54:12.299284"], ["updated_at", "2025-10-17 08:54:12.299284"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (2.3ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 6], ["name", "Unit 202"], ["created_at", "2025-10-17 08:54:12.315672"], ["updated_at", "2025-10-17 08:54:12.315672"]]
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:47:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 6]]
  â†³ lib/tasks/fake_data.rake:53:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  â†³ lib/tasks/fake_data.rake:55:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  â†³ lib/tasks/fake_data.rake:56:in 'block (2 levels) in <top (required)>'
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-17 09:54:24 +0100
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 09:54:25 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 09:54:25 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mUnit Load (2.2ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (1.4ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLease Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
Started GET "/api/v1/units" for ::1 at 2025-10-17 09:56:10 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.1ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.2ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-10-17 09:58:29 +0100
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 16.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 09:58:31 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (4.2ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-10-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 3], ["id", 5], ["id", 6], ["id", 4]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (2.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
Completed 200 OK in 1173ms (Views: 0.1ms | ActiveRecord: 29.1ms (23 queries, 0 cached) | GC: 20.2ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 09:58:32 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-10-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 3], ["id", 5], ["id", 6], ["id", 4]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 5.7ms (23 queries, 0 cached) | GC: 2.1ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 10:01:56 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 0.6ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 10:01:56 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" NOT IN (SELECT "leases"."unit_id" FROM "leases" WHERE (move_out_date IS NULL OR move_out_date > $1))[0m  [[nil, "2025-10-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 3], ["id", 4], ["id", 5], ["id", 6]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
Completed 200 OK in 41ms (Views: 0.1ms | ActiveRecord: 15.3ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 10:02:40 +0100
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 8.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 10:02:40 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" NOT IN (SELECT "leases"."unit_id" FROM "leases" WHERE (move_out_date IS NULL OR move_out_date > $1))[0m  [[nil, "2025-10-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 3], ["id", 4], ["id", 5], ["id", 6]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 17.4ms (23 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Count (21.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-10-17 10:10:51 +0100
  [1m[36mActiveRecord::SchemaMigration Load (4.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 61ms (Views: 0.1ms | ActiveRecord: 13.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-10-17 10:10:52 +0100
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (5.9ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-10-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (2.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 3], ["id", 5], ["id", 6], ["id", 4]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 6], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 11], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 12], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 14], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 13], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 8], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 15], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 9], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 7], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:12:in 'Unit#available?'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 10], [nil, "2025-10-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:17:in 'Unit#current_lease'
Completed 200 OK in 175ms (Views: 0.4ms | ActiveRecord: 23.7ms (23 queries, 0 cached) | GC: 36.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateUnitMonthlyPrices (20251017091748)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "unit_monthly_prices" ("id" bigserial primary key, "unit_id" bigint NOT NULL, "term" character varying NOT NULL, "price" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_a755434ecc"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_unit_monthly_prices_on_unit_id" ON "unit_monthly_prices" ("unit_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_unit_monthly_prices_on_unit_id_and_term" ON "unit_monthly_prices" ("unit_id", "term")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251017091748') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."name" IN ($1, $2) LIMIT $3[0m  [["name", "The Meadows"], ["name", "Cassidy South"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:86:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."name" IN ($1, $2)[0m  [["name", "The Meadows"], ["name", "Cassidy South"]]
  â†³ lib/tasks/fake_data.rake:94:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:95:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (1.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" WHERE "properties"."name" IN ($1, $2) LIMIT $3[0m  [["name", "The Meadows"], ["name", "Cassidy South"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:86:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."name" IN ($1, $2)[0m  [["name", "The Meadows"], ["name", "Cassidy South"]]
  â†³ lib/tasks/fake_data.rake:94:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:95:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (2.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (1.0ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 7]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 7]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 7]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 7]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 8]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 8]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 8]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 8]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 3]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 3]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 4]]
  â†³ lib/tasks/fake_data.rake:95:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 4]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 9]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 9]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 9]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 9]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 10]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 10]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 10]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 10]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 4]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 4]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 4]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 5]]
  â†³ lib/tasks/fake_data.rake:95:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 5]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 11]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 11]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 11]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 11]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 12]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 12]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 12]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 12]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 13]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 13]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 13]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 13]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 5]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 5]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 5]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 6]]
  â†³ lib/tasks/fake_data.rake:95:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 14]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 14]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 14]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 14]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 15]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 15]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 15]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 15]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 6]]
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:97:in 'block (3 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (3.0ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-10-17 09:18:37.013498"], ["updated_at", "2025-10-17 09:18:37.013498"]]
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (2.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 7], ["name", "Unit 101"], ["created_at", "2025-10-17 09:18:37.030232"], ["updated_at", "2025-10-17 09:18:37.030232"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 16], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (2.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 16], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-10-17 09:18:37.048368"], ["updated_at", "2025-10-17 09:18:37.048368"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 16], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 16], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-10-17 09:18:37.053463"], ["updated_at", "2025-10-17 09:18:37.053463"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 16], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 16], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-10-17 09:18:37.056845"], ["updated_at", "2025-10-17 09:18:37.056845"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 7], ["name", "Unit 102"], ["created_at", "2025-10-17 09:18:37.058846"], ["updated_at", "2025-10-17 09:18:37.058846"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 17], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 17], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-10-17 09:18:37.061969"], ["updated_at", "2025-10-17 09:18:37.061969"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 17], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 17], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-10-17 09:18:37.064474"], ["updated_at", "2025-10-17 09:18:37.064474"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 17], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 17], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-10-17 09:18:37.067249"], ["updated_at", "2025-10-17 09:18:37.067249"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (2.0ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 7], ["name", "Unit 103"], ["created_at", "2025-10-17 09:18:37.068702"], ["updated_at", "2025-10-17 09:18:37.068702"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 18], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 18], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-10-17 09:18:37.073140"], ["updated_at", "2025-10-17 09:18:37.073140"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 18], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 18], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-10-17 09:18:37.076094"], ["updated_at", "2025-10-17 09:18:37.076094"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 18], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 18], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-10-17 09:18:37.078876"], ["updated_at", "2025-10-17 09:18:37.078876"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 7]]
  â†³ lib/tasks/fake_data.rake:36:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-10-17 09:18:37.084644"], ["updated_at", "2025-10-17 09:18:37.084644"]]
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 8], ["name", "Unit 201"], ["created_at", "2025-10-17 09:18:37.086648"], ["updated_at", "2025-10-17 09:18:37.086648"]]
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (10.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 19], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 19], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-10-17 09:18:37.100108"], ["updated_at", "2025-10-17 09:18:37.100108"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 19], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 19], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-10-17 09:18:37.103014"], ["updated_at", "2025-10-17 09:18:37.103014"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 19], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 19], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-10-17 09:18:37.105466"], ["updated_at", "2025-10-17 09:18:37.105466"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 8], ["name", "Unit 202"], ["created_at", "2025-10-17 09:18:37.108463"], ["updated_at", "2025-10-17 09:18:37.108463"]]
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 20], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 20], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-10-17 09:18:37.111553"], ["updated_at", "2025-10-17 09:18:37.111553"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 20], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 20], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-10-17 09:18:37.113951"], ["updated_at", "2025-10-17 09:18:37.113951"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 20], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 20], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-10-17 09:18:37.117093"], ["updated_at", "2025-10-17 09:18:37.117093"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 8]]
  â†³ lib/tasks/fake_data.rake:67:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  â†³ lib/tasks/fake_data.rake:69:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  â†³ lib/tasks/fake_data.rake:70:in 'block (2 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices"[0m
  â†³ lib/tasks/fake_data.rake:71:in 'block (2 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnitMonthlyPrice Load (19.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices"[0m
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnitMonthlyPrice Load (13.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices"[0m
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnitMonthlyPrice Load (16.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices"[0m
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mCACHE Unit Load (0.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (1.6ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to ReplaceTermWithUnitMonthlyPriceInRentalApplications (20251017092002)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "rental_applications" DROP COLUMN "term"[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "unit_monthly_price_id" bigint NOT NULL[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_monthly_price_id" ON "rental_applications" ("unit_monthly_price_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_a589f39559"
FOREIGN KEY ("unit_monthly_price_id")
  REFERENCES "unit_monthly_prices" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251017092002') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (1.3ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 ORDER BY "unit_monthly_prices"."id" ASC LIMIT $2[0m  [["unit_id", 16], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Load (3.1ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" ASC LIMIT $1 OFFSET $2[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 ORDER BY "unit_monthly_prices"."id" ASC LIMIT $2[0m  [["unit_id", 17], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.6ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE DATABASE "laft_test" ENCODING = 'unicode'[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-10 15:06:56 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Steeeee test", "email" => "stevenking86+1@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}}
[31mUnpermitted parameters: :password, :password_confirmation. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000126b9f790>, params: {"user" => {"name" => "Steeeee test", "email" => "stevenking86+1@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}, "controller" => "api/v1/users", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86+1@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (3.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Steeeee test"], ["email", "stevenking86+1@gmail.com"], ["created_at", "2025-11-10 15:06:56.834438"], ["updated_at", "2025-11-10 15:06:56.834438"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 36ms (Views: 0.1ms | ActiveRecord: 18.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:06:59 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:06:59 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (2.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mVerification Load (1.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (3.8ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-11-10 15:07:29.005857"], ["updated_at", "2025-11-10 15:07:29.005857"]]
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:7:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (3.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 9], ["name", "Unit 101"], ["created_at", "2025-11-10 15:07:29.022583"], ["updated_at", "2025-11-10 15:07:29.022583"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 21], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (1.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 21], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-11-10 15:07:29.040829"], ["updated_at", "2025-11-10 15:07:29.040829"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 21], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 21], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-11-10 15:07:29.044963"], ["updated_at", "2025-11-10 15:07:29.044963"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 21], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 21], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-11-10 15:07:29.047652"], ["updated_at", "2025-11-10 15:07:29.047652"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 9], ["name", "Unit 102"], ["created_at", "2025-11-10 15:07:29.048891"], ["updated_at", "2025-11-10 15:07:29.048891"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 22], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 22], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-11-10 15:07:29.051726"], ["updated_at", "2025-11-10 15:07:29.051726"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 22], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 22], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-11-10 15:07:29.055438"], ["updated_at", "2025-11-10 15:07:29.055438"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 22], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 22], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-11-10 15:07:29.058113"], ["updated_at", "2025-11-10 15:07:29.058113"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 9], ["name", "Unit 103"], ["created_at", "2025-11-10 15:07:29.060343"], ["updated_at", "2025-11-10 15:07:29.060343"]]
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:23:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 23], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 23], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-11-10 15:07:29.063466"], ["updated_at", "2025-11-10 15:07:29.063466"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 23], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 23], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-11-10 15:07:29.065767"], ["updated_at", "2025-11-10 15:07:29.065767"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 23], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 23], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-11-10 15:07:29.067995"], ["updated_at", "2025-11-10 15:07:29.067995"]]
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:29:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 9]]
  â†³ lib/tasks/fake_data.rake:36:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-11-10 15:07:29.074250"], ["updated_at", "2025-11-10 15:07:29.074250"]]
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:39:in 'block (2 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 10], ["name", "Unit 201"], ["created_at", "2025-11-10 15:07:29.076049"], ["updated_at", "2025-11-10 15:07:29.076049"]]
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (8.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 24], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 24], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-11-10 15:07:29.087199"], ["updated_at", "2025-11-10 15:07:29.087199"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 24], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 24], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-11-10 15:07:29.090154"], ["updated_at", "2025-11-10 15:07:29.090154"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 24], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 24], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-11-10 15:07:29.092335"], ["updated_at", "2025-11-10 15:07:29.092335"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 10], ["name", "Unit 202"], ["created_at", "2025-11-10 15:07:29.094337"], ["updated_at", "2025-11-10 15:07:29.094337"]]
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:54:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 25], ["term", "9 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 25], ["term", "9 months"], ["price", "1000.0"], ["created_at", "2025-11-10 15:07:29.097221"], ["updated_at", "2025-11-10 15:07:29.097221"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 25], ["term", "12 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 25], ["term", "12 months"], ["price", "950.0"], ["created_at", "2025-11-10 15:07:29.099312"], ["updated_at", "2025-11-10 15:07:29.099312"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 25], ["term", "24 months"], ["LIMIT", 1]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 25], ["term", "24 months"], ["price", "900.0"], ["created_at", "2025-11-10 15:07:29.101559"], ["updated_at", "2025-11-10 15:07:29.101559"]]
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ lib/tasks/fake_data.rake:60:in 'block (3 levels) in <top (required)>'
  [1m[36mUnit Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 10]]
  â†³ lib/tasks/fake_data.rake:67:in 'block (2 levels) in <top (required)>'
  [1m[36mProperty Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  â†³ lib/tasks/fake_data.rake:69:in 'block (2 levels) in <top (required)>'
  [1m[36mUnit Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  â†³ lib/tasks/fake_data.rake:70:in 'block (2 levels) in <top (required)>'
  [1m[36mUnitMonthlyPrice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices"[0m
  â†³ lib/tasks/fake_data.rake:71:in 'block (2 levels) in <top (required)>'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mVerification Load (0.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mPayment Load (2.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mLeaseTenant Load (1.8ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mUser Destroy (3.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mLeaseTenant Load (0.1ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mVerification Load (0.1ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 10]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 10]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 10]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 10]]
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (8.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 11]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 11]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 11]]
  [1m[36mLeaseTenant Load (0.3ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 11]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 11]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 12]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 12]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 12]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 12]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 12]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mVerification Load (0.1ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mLeaseTenant Load (0.1ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mLeaseTenant Load (0.1ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 14]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "John Doe"], ["email", "john@example.com"], ["created_at", "2025-11-10 15:08:34.123874"], ["updated_at", "2025-11-10 15:08:34.123874"], ["password_digest", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jane@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Jane Smith"], ["email", "jane@example.com"], ["created_at", "2025-11-10 15:08:34.127269"], ["updated_at", "2025-11-10 15:08:34.127269"], ["password_digest", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bob@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Bob Johnson"], ["email", "bob@example.com"], ["created_at", "2025-11-10 15:08:34.136433"], ["updated_at", "2025-11-10 15:08:34.136433"], ["password_digest", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-10 15:08:43 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.1ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.3ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-10 15:08:53 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86+1@gmail.com", "password" => "Passwrod123!", "auth" => {"email" => "stevenking86+1@gmail.com", "password" => "Passwrod123!"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86+1@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-10 15:08:58 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86+1@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86+1@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86+1@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.3ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-10 15:10:20 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-10 15:10:35 +0000
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"name" => "Ste", "email" => "stevenking86@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}}
[31mUnpermitted parameters: :password, :password_confirmation. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x00000001278655b0>, params: {"user" => {"name" => "Ste", "email" => "stevenking86@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}, "controller" => "api/v1/users", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Ste"], ["email", "stevenking86@gmail.com"], ["created_at", "2025-11-10 15:10:35.212990"], ["updated_at", "2025-11-10 15:10:35.212990"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 7ms (Views: 0.1ms | ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.1ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:10:36 +0000
Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:10:36 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 0.1ms | ActiveRecord: 15.2ms (1 query, 0 cached) | GC: 0.2ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mProperty Count (11.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUnit Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  [1m[36mUnitMonthlyPrice Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "unit_monthly_prices"[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUnit Count (3.5ms)[0m  [1m[34mSELECT COUNT(DISTINCT "units"."id") FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-10"]]
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-10"]]
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mCACHE Property Load (0.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" ORDER BY "units"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/units" for ::1 at 2025-11-10 15:12:14 +0000
Processing by Api::V1::UnitsController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for ::1 at 2025-11-10 15:12:25 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "john@example.com", "password" => "", "auth" => {"email" => "john@example.com", "password" => ""}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "john@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for ::1 at 2025-11-10 15:12:29 +0000
Processing by Api::V1::UnitsController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (1.6ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-10"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 79ms (Views: 0.1ms | ActiveRecord: 18.6ms (23 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-10 15:12:46 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-10 15:13:21 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "password", "auth" => {"email" => "stevenking86@gmail.com", "password" => "password"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:13:22 +0000
Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-10 15:13:22 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-10"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (3.4ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-10"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (2.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 24.0ms (23 queries, 0 cached) | GC: 0.0ms)


  [1m[36mLease Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-10"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 23.2ms (23 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (42.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:04:32 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.3) lib/active_record/migration.rb:666:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:04:36 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:04:37 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:04:41 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-12 16:08:50 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-12 16:09:12 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112160327_add_personal_info_to_rental_applications.rb
db/migrate/20251112160343_remove_name_from_users.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddPersonalInfoToRentalApplications (20251112160327)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "first_name" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "last_name" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "date_of_birth" date[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "gender" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112160327') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveNameFromUsers (20251112160343)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "name"[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112160343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-12 16:09:31 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"email" => "sttttteventest@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}}
[31mUnpermitted parameters: :password, :password_confirmation. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000124c7d5d8>, params: {"user" => {"email" => "sttttteventest@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}, "controller" => "api/v1/users", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sttttteventest@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "sttttteventest@gmail.com"], ["created_at", "2025-11-12 16:09:31.636153"], ["updated_at", "2025-11-12 16:09:31.636153"], ["password_digest", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 54ms (Views: 0.1ms | ActiveRecord: 14.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:09:33 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (3.1ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.8ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 86ms (Views: 0.2ms | ActiveRecord: 25.3ms (33 queries, 0 cached) | GC: 10.9ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:09:33 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 43ms (Views: 0.2ms | ActiveRecord: 9.0ms (33 queries, 0 cached) | GC: 0.7ms)


Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:09:37 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.3ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:09:37 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:8:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.6ms (6 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:20:24 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112161915_create_active_storage_tables.active_storage.rb
db/migrate/20251112161920_add_verification_fields.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.3) lib/active_record/migration.rb:666:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:20:36 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 2 pending migrations:

db/migrate/20251112161915_create_active_storage_tables.active_storage.rb
db/migrate/20251112161920_add_verification_fields.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateActiveStorageTables (20251112161915)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112161915') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddVerificationFields (20251112161920)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "verifications" ADD "id_name_first" character varying[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "verifications" ADD "id_name_last" character varying[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "verifications" ADD "id_valid" boolean DEFAULT FALSE[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "verifications" ADD "name_match" boolean DEFAULT FALSE[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "verifications" ADD "verification_status" character varying DEFAULT 'pending'[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "verifications" ADD "ai_response" jsonb[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112161920') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-12 16:26:02 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 12.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:26:03 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (2.4ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 87ms (Views: 0.4ms | ActiveRecord: 23.4ms (33 queries, 0 cached) | GC: 12.7ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:26:04 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 49ms (Views: 0.2ms | ActiveRecord: 8.1ms (33 queries, 0 cached) | GC: 1.0ms)


Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:26:05 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:26:05 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.1ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 16:26:34 +0000
Processing by Api::V1::RentalApplicationsController#create as */*
  Parameters: {"rental_application" => {"property_id" => 8, "unit_id" => 20, "unit_monthly_price_id" => 14, "move_in_date" => "2025-11-30", "first_name" => "Steven", "last_name" => "GK", "date_of_birth" => "1986-07-27", "gender" => "male"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mRentalApplication Create (8.9ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 18], ["property_id", 8], ["unit_id", 20], ["move_in_date", "2025-11-30"], ["status", 0], ["created_at", "2025-11-12 16:26:34.551240"], ["updated_at", "2025-11-12 16:26:34.551240"], ["unit_monthly_price_id", 14], ["first_name", "Steven"], ["last_name", "GK"], ["date_of_birth", "1986-07-27"], ["gender", "male"]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
Completed 201 Created in 34ms (Views: 0.2ms | ActiveRecord: 16.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/1/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:26:35 +0000
  
RuntimeError (Missing Active Storage service name. Specify Active Storage service name for config.active_storage.service in config/environments/development.rb):
  
app/models/verification.rb:5:in '<class:Verification>'
app/models/verification.rb:1:in '<top (required)>'
Started GET "/api/v1/rental_applications/1/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:26:35 +0000
  
RuntimeError (Missing Active Storage service name. Specify Active Storage service name for config.active_storage.service in config/environments/development.rb):
  
app/models/verification.rb:5:in '<class:Verification>'
app/models/verification.rb:1:in '<top (required)>'
Started POST "/api/v1/rental_applications/1/verifications" for 127.0.0.1 at 2025-11-12 16:26:45 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x00000001253dba00 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-73295-zffxw5.png>, @content_type="image/png", @original_filename="Screenshot 2025-10-15 at 4.45.32â€¯PM.png", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"Screenshot 2025-10-15 at 4.45.32â€¯PM.png\"\r\nContent-Type: image/png\r\n">, "rental_application_id" => "1"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 1], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)


  
RuntimeError (Missing Active Storage service name. Specify Active Storage service name for config.active_storage.service in config/environments/development.rb):
  
app/models/verification.rb:5:in '<class:Verification>'
app/models/verification.rb:1:in '<top (required)>'
app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/1/verifications" for 127.0.0.1 at 2025-11-12 16:28:56 +0000
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000122c36c70 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-75680-tbq5q.png>, @content_type="image/png", @original_filename="Screenshot 2025-10-15 at 4.45.32â€¯PM.png", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"Screenshot 2025-10-15 at 4.45.32â€¯PM.png\"\r\nContent-Type: image/png\r\n">, "rental_application_id" => "1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 1], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
Completed 500 Internal Server Error in 65ms (ActiveRecord: 24.7ms (2 queries, 0 cached) | GC: 0.0ms)


  
RuntimeError (Missing Active Storage service name. Specify Active Storage service name for config.active_storage.service in config/environments/development.rb):
  
app/models/verification.rb:5:in '<class:Verification>'
app/models/verification.rb:1:in '<top (required)>'
app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/1/verifications" for 127.0.0.1 at 2025-11-12 16:31:03 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000124f88430 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-77458-k35obk.png>, @content_type="image/png", @original_filename="Screenshot 2025-10-15 at 4.45.32â€¯PM.png", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"Screenshot 2025-10-15 at 4.45.32â€¯PM.png\"\r\nContent-Type: image/png\r\n">, "rental_application_id" => "1"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (6.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 1], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (2.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 1], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Create (4.0ms)[0m  [1m[32mINSERT INTO "verifications" ("rental_application_id", "user_id", "is_verified", "created_at", "updated_at", "id_name_first", "id_name_last", "id_valid", "name_match", "verification_status", "ai_response") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["rental_application_id", 1], ["user_id", 18], ["is_verified", false], ["created_at", "2025-11-12 16:31:03.529353"], ["updated_at", "2025-11-12 16:31:03.529353"], ["id_name_first", nil], ["id_name_last", nil], ["id_valid", false], ["name_match", false], ["verification_status", "pending"], ["ai_response", nil]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (2.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (1.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "htpik1a3igt18a02j0ddxigszgfj"], ["filename", "Screenshot 2025-10-15 at 4.45.32â€¯PM.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 187675], ["checksum", "z0ssQsd3VTwmXcWbGW7SwQ=="], ["created_at", "2025-11-12 16:31:03.554895"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (1.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 1], ["blob_id", 1], ["created_at", "2025-11-12 16:31:03.557018"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.9ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:31:03.558920"], ["id", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: htpik1a3igt18a02j0ddxigszgfj (checksum: z0ssQsd3VTwmXcWbGW7SwQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7368b135-1090-4be1-aa99-b1edc9e6db4b) to Async(default) with arguments: #<GlobalID:0x0000000124f666a0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: htpik1a3igt18a02j0ddxigszgfj[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.6ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2, "ai_response" = $3 WHERE "verifications"."id" = $4[0m  [["updated_at", "2025-11-12 16:31:03.591138"], ["verification_status", "failed"], ["ai_response", "{\"error\":\"Invalid AI response\"}"], ["id", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 183ms (Views: 0.2ms | ActiveRecord: 62.1ms (10 queries, 0 cached) | GC: 12.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b] Performing ActiveStorage::AnalyzeJob (Job ID: 7368b135-1090-4be1-aa99-b1edc9e6db4b) from Async(default) enqueued at 2025-11-12T16:31:03.573675000Z with arguments: #<GlobalID:0x000000012539aa78 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mVerification Load (0.4ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:31:03.612994"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7368b135-1090-4be1-aa99-b1edc9e6db4b] Performed ActiveStorage::AnalyzeJob (Job ID: 7368b135-1090-4be1-aa99-b1edc9e6db4b) from Async(default) in 16.15ms
Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:31:14 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (1.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 21.3ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units/20" for 127.0.0.1 at 2025-11-12 16:31:14 +0000
Processing by Api::V1::UnitsController#show as */*
  Parameters: {"id" => "20", "unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:10:in 'Api::V1::UnitsController#show'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.3ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 16:31:44 +0000
Processing by Api::V1::RentalApplicationsController#create as */*
  Parameters: {"rental_application" => {"property_id" => 8, "unit_id" => 20, "unit_monthly_price_id" => 13, "move_in_date" => "2025-12-01", "first_name" => "Steven", "last_name" => "Gerhardt-King", "date_of_birth" => "1986-07-27", "gender" => "male"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mRentalApplication Create (1.0ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["user_id", 18], ["property_id", 8], ["unit_id", 20], ["move_in_date", "2025-12-01"], ["status", 0], ["created_at", "2025-11-12 16:31:44.431347"], ["updated_at", "2025-11-12 16:31:44.431347"], ["unit_monthly_price_id", 13], ["first_name", "Steven"], ["last_name", "Gerhardt-King"], ["date_of_birth", "1986-07-27"], ["gender", "male"]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/rental_applications_controller.rb:8:in 'Api::V1::RentalApplicationsController#create'
Completed 201 Created in 13ms (Views: 0.1ms | ActiveRecord: 4.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/2/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:31:44 +0000
Processing by Api::V1::VerificationsController#show_by_application as */*
  Parameters: {"rental_application_id" => "2", "verification" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:36:in 'Api::V1::VerificationsController#show_by_application'
Completed 404 Not Found in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/2/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:31:44 +0000
Processing by Api::V1::VerificationsController#show_by_application as */*
  Parameters: {"rental_application_id" => "2", "verification" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:36:in 'Api::V1::VerificationsController#show_by_application'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:32:21 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000123eee890 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-77458-e9h3az.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Create (1.6ms)[0m  [1m[32mINSERT INTO "verifications" ("rental_application_id", "user_id", "is_verified", "created_at", "updated_at", "id_name_first", "id_name_last", "id_valid", "name_match", "verification_status", "ai_response") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["rental_application_id", 2], ["user_id", 18], ["is_verified", false], ["created_at", "2025-11-12 16:32:21.954097"], ["updated_at", "2025-11-12 16:32:21.954097"], ["id_name_first", nil], ["id_name_last", nil], ["id_valid", false], ["name_match", false], ["verification_status", "pending"], ["ai_response", nil]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "5drj1oylv3v8yb2933mx6r39f7sg"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:32:21.962407"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 2], ["created_at", "2025-11-12 16:32:21.963961"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.3ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:32:21.965014"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (7.5ms) [0m[32mUploaded file to key: 5drj1oylv3v8yb2933mx6r39f7sg (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac) to Async(default) with arguments: #<GlobalID:0x0000000123cfa1d8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[36m  Disk Storage (0.7ms) [0m[34mDownloaded file from key: 5drj1oylv3v8yb2933mx6r39f7sg[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2, "ai_response" = $3 WHERE "verifications"."id" = $4[0m  [["updated_at", "2025-11-12 16:32:21.977012"], ["verification_status", "failed"], ["ai_response", "{\"error\":\"Invalid AI response\"}"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 45ms (Views: 0.1ms | ActiveRecord: 10.8ms (10 queries, 0 cached) | GC: 3.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac] Performing ActiveStorage::AnalyzeJob (Job ID: 5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac) from Async(default) enqueued at 2025-11-12T16:32:21.975415000Z with arguments: #<GlobalID:0x0000000124396a28 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mActiveStorage::Blob Update (1.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:32:21.992546"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac] Performed ActiveStorage::AnalyzeJob (Job ID: 5cbedab2-8988-44d4-8bc4-6bd56ad6f7ac) from Async(default) in 10.23ms
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddMiddleNameToRentalApplications (20251112163324)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD "middle_name" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112163324') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddIdNameMiddleToVerifications (20251112163404)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "verifications" ADD "id_name_middle" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251112163404') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:41:54 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000121c7fd90 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-85769-vdw3ir.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (3.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.3ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "h3wvdoj5h38yoil6sk2h9ewsvrgy"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:41:54.942339"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.7ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 3], ["created_at", "2025-11-12 16:41:54.943746"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:41:54.945188"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (10.4ms) [0m[32mUploaded file to key: h3wvdoj5h38yoil6sk2h9ewsvrgy (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: b5438aea-ad2a-40d9-8c4f-e49c8024903d) to Async(default) with arguments: #<GlobalID:0x0000000123170510 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 76e95956-ca54-4e0e-8110-429c39978f28) to Async(default) with arguments: #<GlobalID:0x00000001231bbd80 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.1ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:41:54.974175"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (0.6ms) [0m[34mDownloaded file from key: h3wvdoj5h38yoil6sk2h9ewsvrgy[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.0ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:41:54.990665"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 182ms (Views: 0.1ms | ActiveRecord: 52.7ms (14 queries, 1 cached) | GC: 1.3ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28] Performing ActiveStorage::AnalyzeJob (Job ID: 76e95956-ca54-4e0e-8110-429c39978f28) from Async(default) enqueued at 2025-11-12T16:41:54.973788000Z with arguments: #<GlobalID:0x00000001234ab7c0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mActiveStorage::Blob Update (1.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mActiveStorage::Attachment Load (2.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mVerification Load (0.4ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:41:55.013522"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [76e95956-ca54-4e0e-8110-429c39978f28] Performed ActiveStorage::AnalyzeJob (Job ID: 76e95956-ca54-4e0e-8110-429c39978f28) from Async(default) in 18.53ms
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mActiveStorage::Blob Load (17.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d] Performing ActiveStorage::PurgeJob (Job ID: b5438aea-ad2a-40d9-8c4f-e49c8024903d) from Async(default) enqueued at 2025-11-12T16:41:54.972999000Z with arguments: #<GlobalID:0x00000001236e4910 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mActiveStorage::Attachment Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mActiveStorage::VariantRecord Load (1.6ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mActiveStorage::Blob Destroy (0.8ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d] [36m  Disk Storage (0.3ms) [0m[31mDeleted file from key: 5drj1oylv3v8yb2933mx6r39f7sg[0m
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d] [36m  Disk Storage (0.1ms) [0m[31mDeleted files by key prefix: variants/5drj1oylv3v8yb2933mx6r39f7sg/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [b5438aea-ad2a-40d9-8c4f-e49c8024903d] Performed ActiveStorage::PurgeJob (Job ID: b5438aea-ad2a-40d9-8c4f-e49c8024903d) from Async(default) in 36.02ms
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:42:09 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000121d9e2a8 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-85769-kzacc0.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.0ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 3]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "qyzl2omkq70h3w5i5ulrp10dap2j"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:42:09.188223"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 4], ["created_at", "2025-11-12 16:42:09.189758"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:09.191015"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (9.1ms) [0m[32mUploaded file to key: qyzl2omkq70h3w5i5ulrp10dap2j (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 5554dbc1-9e97-4fd0-985f-f50068ca790c) to Async(default) with arguments: #<GlobalID:0x00000001221e0af0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8d7e8b54-fcc4-4061-8825-58310124510a) to Async(default) with arguments: #<GlobalID:0x00000001221a9eb0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.1ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:09.205552"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (0.9ms) [0m[34mDownloaded file from key: qyzl2omkq70h3w5i5ulrp10dap2j[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:09.209824"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 58ms (Views: 0.1ms | ActiveRecord: 11.4ms (14 queries, 1 cached) | GC: 1.4ms)


[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c] Performing ActiveStorage::PurgeJob (Job ID: 5554dbc1-9e97-4fd0-985f-f50068ca790c) from Async(default) enqueued at 2025-11-12T16:42:09.204631000Z with arguments: #<GlobalID:0x0000000122bbda50 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a] Performing ActiveStorage::AnalyzeJob (Job ID: 8d7e8b54-fcc4-4061-8825-58310124510a) from Async(default) enqueued at 2025-11-12T16:42:09.205060000Z with arguments: #<GlobalID:0x0000000122b5c2f0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mActiveStorage::Attachment Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mActiveStorage::Blob Update (2.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mActiveStorage::VariantRecord Load (2.6ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 4]]
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mVerification Load (0.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mActiveStorage::Blob Destroy (1.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mVerification Update (0.7ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:09.234606"], ["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c]   [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8d7e8b54-fcc4-4061-8825-58310124510a] Performed ActiveStorage::AnalyzeJob (Job ID: 8d7e8b54-fcc4-4061-8825-58310124510a) from Async(default) in 14.71ms
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c] [36m  Disk Storage (0.5ms) [0m[31mDeleted file from key: h3wvdoj5h38yoil6sk2h9ewsvrgy[0m
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/h3wvdoj5h38yoil6sk2h9ewsvrgy/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [5554dbc1-9e97-4fd0-985f-f50068ca790c] Performed ActiveStorage::PurgeJob (Job ID: 5554dbc1-9e97-4fd0-985f-f50068ca790c) from Async(default) in 15.89ms
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:42:15 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/2/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:42:15 +0000
Processing by Api::V1::VerificationsController#show_by_application as */*
  Parameters: {"rental_application_id" => "2", "verification" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.1ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:36:in 'Api::V1::VerificationsController#show_by_application'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:93:in 'Api::V1::VerificationsController#verification_json'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:94:in 'Api::V1::VerificationsController#verification_json'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.9ms (5 queries, 0 cached) | GC: 1.0ms)


Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:42:22 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000122e74ca8 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-85769-6toxs9.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 4]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "49ez23iw8frkndjenrg160p0m4d8"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:42:22.820396"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 5], ["created_at", "2025-11-12 16:42:22.822358"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:22.823754"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (11.2ms) [0m[32mUploaded file to key: 49ez23iw8frkndjenrg160p0m4d8 (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 529c6853-ea0a-4cfb-8767-cf00809714fd) to Async(default) with arguments: #<GlobalID:0x0000000123420490 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 07bacf1f-195d-48b4-ab67-b8c32e388cfa) to Async(default) with arguments: #<GlobalID:0x00000001233ce208 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:22.840595"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (1.1ms) [0m[34mDownloaded file from key: 49ez23iw8frkndjenrg160p0m4d8[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:22.845354"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 58ms (Views: 0.1ms | ActiveRecord: 9.9ms (14 queries, 1 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa] Performing ActiveStorage::AnalyzeJob (Job ID: 07bacf1f-195d-48b4-ab67-b8c32e388cfa) from Async(default) enqueued at 2025-11-12T16:42:22.840137000Z with arguments: #<GlobalID:0x0000000123173c10 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd] Performing ActiveStorage::PurgeJob (Job ID: 529c6853-ea0a-4cfb-8767-cf00809714fd) from Async(default) enqueued at 2025-11-12T16:42:22.839642000Z with arguments: #<GlobalID:0x000000012311d4c8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mActiveStorage::Blob Update (2.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mActiveStorage::Attachment Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mVerification Load (0.4ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mActiveStorage::VariantRecord Load (2.9ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 4]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mVerification Update (1.1ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:22.867617"], ["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa]   [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [07bacf1f-195d-48b4-ab67-b8c32e388cfa] Performed ActiveStorage::AnalyzeJob (Job ID: 07bacf1f-195d-48b4-ab67-b8c32e388cfa) from Async(default) in 15.51ms
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mActiveStorage::Blob Destroy (0.8ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 4]]
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd] [36m  Disk Storage (0.2ms) [0m[31mDeleted file from key: qyzl2omkq70h3w5i5ulrp10dap2j[0m
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/qyzl2omkq70h3w5i5ulrp10dap2j/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [529c6853-ea0a-4cfb-8767-cf00809714fd] Performed ActiveStorage::PurgeJob (Job ID: 529c6853-ea0a-4cfb-8767-cf00809714fd) from Async(default) in 16.65ms
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:42:44 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000124329fb8 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-85769-d0a0cg.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (15.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (2.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 5]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "265vvkyhbyk0fhhqms95v6g370tx"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:42:44.945286"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 6], ["created_at", "2025-11-12 16:42:44.948707"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.5ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:44.951617"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (6.2ms) [0m[32mUploaded file to key: 265vvkyhbyk0fhhqms95v6g370tx (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615) to Async(default) with arguments: #<GlobalID:0x00000001234a24b8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9b790a36-af28-4f7b-ad3d-d4bd36b880bc) to Async(default) with arguments: #<GlobalID:0x000000012334f4f8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.8ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:44.966604"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (0.8ms) [0m[34mDownloaded file from key: 265vvkyhbyk0fhhqms95v6g370tx[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (2.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:42:44.973295"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:69:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 84ms (Views: 0.1ms | ActiveRecord: 26.7ms (14 queries, 1 cached) | GC: 25.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc] Performing ActiveStorage::AnalyzeJob (Job ID: 9b790a36-af28-4f7b-ad3d-d4bd36b880bc) from Async(default) enqueued at 2025-11-12T16:42:44.965957000Z with arguments: #<GlobalID:0x00000001211b9c08 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mActiveStorage::Blob Load (2.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615] Performing ActiveStorage::PurgeJob (Job ID: e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615) from Async(default) enqueued at 2025-11-12T16:42:44.965223000Z with arguments: #<GlobalID:0x0000000121191a78 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mActiveStorage::Blob Update (2.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mActiveStorage::Attachment Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 6]]
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mActiveStorage::VariantRecord Load (1.4ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mVerification Load (0.9ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 5], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mVerification Update (1.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:42:44.999291"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b790a36-af28-4f7b-ad3d-d4bd36b880bc] Performed ActiveStorage::AnalyzeJob (Job ID: 9b790a36-af28-4f7b-ad3d-d4bd36b880bc) from Async(default) in 14.25ms
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mActiveStorage::Blob Destroy (0.7ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 5]]
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615] [36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 49ez23iw8frkndjenrg160p0m4d8[0m
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/49ez23iw8frkndjenrg160p0m4d8/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615] Performed ActiveStorage::PurgeJob (Job ID: e435ded7-2bf4-46e6-b5f1-d3f2a9b1a615) from Async(default) in 15.19ms
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:46:28 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x000000012649fe18 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-89296-cu8t1n.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 6]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "3q8cztys2oeyns098q3zqouha136"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:46:29.071374"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 7], ["created_at", "2025-11-12 16:46:29.072928"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:46:29.073971"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (6.7ms) [0m[32mUploaded file to key: 3q8cztys2oeyns098q3zqouha136 (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: f0825ffe-1534-4f63-b0ed-d2daa54b6a57) to Async(default) with arguments: #<GlobalID:0x00000001279a0010 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b) to Async(default) with arguments: #<GlobalID:0x00000001279eb8a8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.0ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:46:29.096312"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: 3q8cztys2oeyns098q3zqouha136[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ID Verification] AI API call completed
[ID Verification] Invalid AI response - no content found
[ID Verification] Full response: {error: "OpenAI API key not configured"}
[ID Verification] Verification result: {error: "Invalid AI response"}
[Verification Controller] Verification failed with error: Invalid AI response
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.0ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:46:29.113924"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 186ms (Views: 0.1ms | ActiveRecord: 64.1ms (14 queries, 1 cached) | GC: 1.4ms)


[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57] Performing ActiveStorage::PurgeJob (Job ID: f0825ffe-1534-4f63-b0ed-d2daa54b6a57) from Async(default) enqueued at 2025-11-12T16:46:29.095332000Z with arguments: #<GlobalID:0x0000000127cd9948 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mActiveStorage::Attachment Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mActiveStorage::VariantRecord Load (1.6ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 6]]
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 6], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mActiveStorage::Blob Destroy (0.5ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mActiveStorage::Blob Load (16.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b] Performing ActiveStorage::AnalyzeJob (Job ID: 7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b) from Async(default) enqueued at 2025-11-12T16:46:29.095980000Z with arguments: #<GlobalID:0x0000000127eb0f78 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57]   [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57] [36m  Disk Storage (0.6ms) [0m[31mDeleted file from key: 265vvkyhbyk0fhhqms95v6g370tx[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57] [36m  Disk Storage (0.1ms) [0m[31mDeleted files by key prefix: variants/265vvkyhbyk0fhhqms95v6g370tx/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f0825ffe-1534-4f63-b0ed-d2daa54b6a57] Performed ActiveStorage::PurgeJob (Job ID: f0825ffe-1534-4f63-b0ed-d2daa54b6a57) from Async(default) in 22.08ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mActiveStorage::Blob Update (1.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mVerification Load (1.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mVerification Update (0.3ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:46:29.150114"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b] Performed ActiveStorage::AnalyzeJob (Job ID: 7abfdc21-5411-4fb6-9e3e-d59d8a8ac86b) from Async(default) in 30.3ms
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:47:02 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (4.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 115ms (Views: 0.6ms | ActiveRecord: 4.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/2/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:47:02 +0000
Processing by Api::V1::VerificationsController#show_by_application as */*
  Parameters: {"rental_application_id" => "2", "verification" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (4.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:36:in 'Api::V1::VerificationsController#show_by_application'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:106:in 'Api::V1::VerificationsController#verification_json'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:107:in 'Api::V1::VerificationsController#verification_json'
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 6.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:47:15 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x00000001265bf780 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-89296-i22duc.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 7]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "0t36fa251w54qnx5063zzo4u2t3e"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:47:15.591702"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 8], ["created_at", "2025-11-12 16:47:15.593351"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:47:15.594684"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (9.1ms) [0m[32mUploaded file to key: 0t36fa251w54qnx5063zzo4u2t3e (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: f605ea76-4832-4b39-b3d4-60c9df5958b0) to Async(default) with arguments: #<GlobalID:0x00000001269efda0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c2dd43cc-a117-4306-92b8-61e5eaa007bb) to Async(default) with arguments: #<GlobalID:0x00000001269eb5c0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.5ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:47:15.609284"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (0.7ms) [0m[34mDownloaded file from key: 0t36fa251w54qnx5063zzo4u2t3e[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ID Verification] AI API call completed
[ID Verification] Invalid AI response - no content found
[ID Verification] Full response: {error: "OpenAI API key not configured"}
[ID Verification] Verification result: {error: "Invalid AI response"}
[Verification Controller] Verification failed with error: Invalid AI response
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.5ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:47:15.614141"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 53ms (Views: 0.1ms | ActiveRecord: 10.1ms (14 queries, 1 cached) | GC: 2.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0] Performing ActiveStorage::PurgeJob (Job ID: f605ea76-4832-4b39-b3d4-60c9df5958b0) from Async(default) enqueued at 2025-11-12T16:47:15.608506000Z with arguments: #<GlobalID:0x0000000127469ba0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb] Performing ActiveStorage::AnalyzeJob (Job ID: c2dd43cc-a117-4306-92b8-61e5eaa007bb) from Async(default) enqueued at 2025-11-12T16:47:15.608921000Z with arguments: #<GlobalID:0x00000001274047f0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mActiveStorage::Attachment Exists? (5.9ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mActiveStorage::Blob Update (4.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 8]]
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mActiveStorage::VariantRecord Load (5.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 7]]
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 7], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mVerification Load (1.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mActiveStorage::Blob Destroy (1.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mVerification Update (0.6ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:47:15.642177"], ["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c2dd43cc-a117-4306-92b8-61e5eaa007bb] Performed ActiveStorage::AnalyzeJob (Job ID: c2dd43cc-a117-4306-92b8-61e5eaa007bb) from Async(default) in 20.42ms
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0] [36m  Disk Storage (1.0ms) [0m[31mDeleted file from key: 3q8cztys2oeyns098q3zqouha136[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/3q8cztys2oeyns098q3zqouha136/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [f605ea76-4832-4b39-b3d4-60c9df5958b0] Performed ActiveStorage::PurgeJob (Job ID: f605ea76-4832-4b39-b3d4-60c9df5958b0) from Async(default) in 22.33ms
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPEN_AI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:48:58 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x00000001228208c0 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-91612-5v7w9l.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.3ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "kl0dv4vndfo1s3g24kx6ez9f3y3z"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:48:58.360616"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 9], ["created_at", "2025-11-12 16:48:58.361913"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:48:58.362918"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (7.0ms) [0m[32mUploaded file to key: kl0dv4vndfo1s3g24kx6ez9f3y3z (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 8eee9d60-751a-40d9-9748-77c15a370f3c) to Async(default) with arguments: #<GlobalID:0x0000000125b9fbd8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 44547b28-6c24-41f2-8eba-3b37b6fda045) to Async(default) with arguments: #<GlobalID:0x0000000123cbbd98 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.3ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:48:58.395121"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: kl0dv4vndfo1s3g24kx6ez9f3y3z[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ID Verification] AI API call completed
[ID Verification] Invalid AI response - no content found
[ID Verification] Full response: {error: "OpenAI API key not configured"}
[ID Verification] Verification result: {error: "Invalid AI response"}
[Verification Controller] Verification failed with error: Invalid AI response
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.7ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:48:58.414856"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 168ms (Views: 0.2ms | ActiveRecord: 40.7ms (14 queries, 1 cached) | GC: 9.7ms)


[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mActiveStorage::Blob Load (1.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c] Performing ActiveStorage::PurgeJob (Job ID: 8eee9d60-751a-40d9-9748-77c15a370f3c) from Async(default) enqueued at 2025-11-12T16:48:58.385263000Z with arguments: #<GlobalID:0x0000000125275648 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mActiveStorage::Attachment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mActiveStorage::Blob Load (12.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045] Performing ActiveStorage::AnalyzeJob (Job ID: 44547b28-6c24-41f2-8eba-3b37b6fda045) from Async(default) enqueued at 2025-11-12T16:48:58.385916000Z with arguments: #<GlobalID:0x000000012551d0d0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mActiveStorage::VariantRecord Load (0.9ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 8], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mActiveStorage::Blob Destroy (0.6ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mActiveStorage::Blob Update (1.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 9]]
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c] [36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 0t36fa251w54qnx5063zzo4u2t3e[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/0t36fa251w54qnx5063zzo4u2t3e/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8eee9d60-751a-40d9-9748-77c15a370f3c] Performed ActiveStorage::PurgeJob (Job ID: 8eee9d60-751a-40d9-9748-77c15a370f3c) from Async(default) in 20.42ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mVerification Load (1.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:48:58.448543"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [44547b28-6c24-41f2-8eba-3b37b6fda045] Performed ActiveStorage::AnalyzeJob (Job ID: 44547b28-6c24-41f2-8eba-3b37b6fda045) from Async(default) in 27.32ms
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPEN_AI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPEN_AI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 16:51:32 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 58ms (Views: 0.1ms | ActiveRecord: 20.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications/2/verifications/show_by_application" for 127.0.0.1 at 2025-11-12 16:51:32 +0000
Processing by Api::V1::VerificationsController#show_by_application as */*
  Parameters: {"rental_application_id" => "2", "verification" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:36:in 'Api::V1::VerificationsController#show_by_application'
  [1m[36mActiveStorage::Attachment Load (1.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:106:in 'Api::V1::VerificationsController#verification_json'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:107:in 'Api::V1::VerificationsController#verification_json'
Completed 200 OK in 48ms (Views: 0.1ms | ActiveRecord: 21.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:51:43 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x00000001236f37a8 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-93813-34mi02.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 9]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "2qzfvtls69u0e19l54pwufipq1yo"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:51:43.125103"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 10], ["created_at", "2025-11-12 16:51:43.126932"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.3ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:51:43.128096"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (10.5ms) [0m[32mUploaded file to key: 2qzfvtls69u0e19l54pwufipq1yo (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: cbf515fd-eaa7-4937-87fd-bff93df093c5) to Async(default) with arguments: #<GlobalID:0x00000001230fb440 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e29b3de6-00f9-4fc9-ba97-1b622395d88b) to Async(default) with arguments: #<GlobalID:0x00000001230f4c08 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.0ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:51:43.155901"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (0.6ms) [0m[34mDownloaded file from key: 2qzfvtls69u0e19l54pwufipq1yo[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ID Verification] AI API call completed
[ID Verification] Invalid AI response - no content found
[ID Verification] Full response: {error: "OpenAI API key not configured"}
[ID Verification] Verification result: {error: "Invalid AI response"}
[Verification Controller] Verification failed with error: Invalid AI response
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.0ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:51:43.174635"], ["verification_status", "failed"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 111ms (Views: 0.1ms | ActiveRecord: 11.1ms (14 queries, 1 cached) | GC: 23.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5] Performing ActiveStorage::PurgeJob (Job ID: cbf515fd-eaa7-4937-87fd-bff93df093c5) from Async(default) enqueued at 2025-11-12T16:51:43.154866000Z with arguments: #<GlobalID:0x00000001234fb040 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mActiveStorage::Attachment Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mActiveStorage::VariantRecord Load (0.8ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 9]]
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 9], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mActiveStorage::Blob Destroy (1.1ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 9]]
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5] [36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: kl0dv4vndfo1s3g24kx6ez9f3y3z[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/kl0dv4vndfo1s3g24kx6ez9f3y3z/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [cbf515fd-eaa7-4937-87fd-bff93df093c5] Performed ActiveStorage::PurgeJob (Job ID: cbf515fd-eaa7-4937-87fd-bff93df093c5) from Async(default) in 22.0ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mActiveStorage::Blob Load (19.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b] Performing ActiveStorage::AnalyzeJob (Job ID: e29b3de6-00f9-4fc9-ba97-1b622395d88b) from Async(default) enqueued at 2025-11-12T16:51:43.155551000Z with arguments: #<GlobalID:0x0000000123b22108 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mActiveStorage::Blob Update (1.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mVerification Load (0.9ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mVerification Update (0.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:51:43.216454"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e29b3de6-00f9-4fc9-ba97-1b622395d88b] Performed ActiveStorage::AnalyzeJob (Job ID: e29b3de6-00f9-4fc9-ba97-1b622395d88b) from Async(default) in 33.27ms
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:53:22 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x00000001240d07d0 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-95570-z4hxcr.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (1.3ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (1.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (6.5ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 10]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "kdsfdizvi9qinswfae5nm6iaschb"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:53:22.923893"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 11], ["created_at", "2025-11-12 16:53:22.926123"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:53:22.927586"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (7.2ms) [0m[32mUploaded file to key: kdsfdizvi9qinswfae5nm6iaschb (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: ed4b5fb9-dc5a-4aa0-9880-136d86a00c60) to Async(default) with arguments: #<GlobalID:0x000000012744fae8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20) to Async(default) with arguments: #<GlobalID:0x00000001255695c0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.3ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:53:22.960383"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (1.2ms) [0m[34mDownloaded file from key: kdsfdizvi9qinswfae5nm6iaschb[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60] Performing ActiveStorage::PurgeJob (Job ID: ed4b5fb9-dc5a-4aa0-9880-136d86a00c60) from Async(default) enqueued at 2025-11-12T16:53:22.949801000Z with arguments: #<GlobalID:0x0000000126176480 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mActiveStorage::Attachment Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mActiveStorage::VariantRecord Load (0.7ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 10]]
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 10], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mActiveStorage::Blob Destroy (0.8ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mActiveStorage::Blob Load (13.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20] Performing ActiveStorage::AnalyzeJob (Job ID: b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20) from Async(default) enqueued at 2025-11-12T16:53:22.950431000Z with arguments: #<GlobalID:0x0000000126ba5690 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60] [36m  Disk Storage (0.5ms) [0m[31mDeleted file from key: 2qzfvtls69u0e19l54pwufipq1yo[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60] [36m  Disk Storage (0.2ms) [0m[31mDeleted files by key prefix: variants/2qzfvtls69u0e19l54pwufipq1yo/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [ed4b5fb9-dc5a-4aa0-9880-136d86a00c60] Performed ActiveStorage::PurgeJob (Job ID: ed4b5fb9-dc5a-4aa0-9880-136d86a00c60) from Async(default) in 17.85ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mActiveStorage::Blob Update (1.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mVerification Load (0.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mVerification Update (0.2ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:53:23.026373"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20] Performed ActiveStorage::AnalyzeJob (Job ID: b91bdc3f-8ffd-4ab5-ac92-cbb15da05a20) from Async(default) in 25.24ms
[ID Verification] OpenAI API Response Status: 429
[ID Verification] Unexpected OpenAI response structure: {"error" => {"message" => "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.", "type" => "insufficient_quota", "param" => nil, "code" => "insufficient_quota"}}
[ID Verification] AI API call completed
[ID Verification] AI service error: {"message" => "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.", "type" => "insufficient_quota", "param" => nil, "code" => "insufficient_quota"}
[ID Verification] Error details: {"error" => {"message" => "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.", "type" => "insufficient_quota", "param" => nil, "code" => "insufficient_quota"}}
[ID Verification] Verification result: {error: "AI service error", details: {"error" => {"message" => "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.", "type" => "insufficient_quota", "param" => nil, "code" => "insufficient_quota"}}}
[Verification Controller] Verification failed with error: AI service error
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (1.8ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2, "ai_response" = $3 WHERE "verifications"."id" = $4[0m  [["updated_at", "2025-11-12 16:53:25.591861"], ["verification_status", "failed"], ["ai_response", "{\"error\":\"AI service error\",\"details\":{\"error\":{\"message\":\"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\"type\":\"insufficient_quota\",\"param\":null,\"code\":\"insufficient_quota\"}}}"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:73:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 2804ms (Views: 0.3ms | ActiveRecord: 56.6ms (14 queries, 1 cached) | GC: 11.7ms)


Started POST "/api/v1/rental_applications/2/verifications" for 127.0.0.1 at 2025-11-12 16:56:16 +0000
Processing by Api::V1::VerificationsController#create as */*
  Parameters: {"id_image" => #<ActionDispatch::Http::UploadedFile:0x0000000126d89e70 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251112-95570-tk5b21.jpg>, @content_type="image/jpeg", @original_filename="steven-license-front.jpg", @headers="Content-Disposition: form-data; name=\"id_image\"; filename=\"steven-license-front.jpg\"\r\nContent-Type: image/jpeg\r\n">, "rental_application_id" => "2"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 AND "rental_applications"."user_id" = $2 LIMIT $3[0m  [["id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:47:in 'Api::V1::VerificationsController#set_rental_application'
  [1m[36mVerification Load (0.4ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 AND "verifications"."user_id" = $2 LIMIT $3[0m  [["rental_application_id", 2], ["user_id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:7:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mRentalApplication Load (2.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 11]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "nqqetp8rufxs9gqa1ydb73j833hr"], ["filename", "steven-license-front.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 3188058], ["checksum", "byCjRITNCxpjIbnJLy16JQ=="], ["created_at", "2025-11-12 16:56:16.668120"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "id_image"], ["record_type", "Verification"], ["record_id", 2], ["blob_id", 12], ["created_at", "2025-11-12 16:56:16.670658"]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (0.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:56:16.672557"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[36m  Disk Storage (8.9ms) [0m[32mUploaded file to key: nqqetp8rufxs9gqa1ydb73j833hr (checksum: byCjRITNCxpjIbnJLy16JQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/verifications_controller.rb:13:in 'Api::V1::VerificationsController#create'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7) to Async(default) with arguments: #<GlobalID:0x0000000126f021d0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac) to Async(default) with arguments: #<GlobalID:0x0000000126ecfd20 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mVerification Update (1.6ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "verification_status" = $2 WHERE "verifications"."id" = $3[0m  [["updated_at", "2025-11-12 16:56:16.688728"], ["verification_status", "pending"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:15:in 'Api::V1::VerificationsController#create'
[Verification Controller] Starting verification for verification_id: 2
[Verification Controller] Rental Application ID: 2
[ID Verification] Starting verification for rental_application_id: 2
[ID Verification] Application name: Steven  Gerhardt-King
[36m  Disk Storage (1.1ms) [0m[34mDownloaded file from key: nqqetp8rufxs9gqa1ydb73j833hr[0m
[ID Verification] Image downloaded, size: 3188058 bytes
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7] Performing ActiveStorage::PurgeJob (Job ID: d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7) from Async(default) enqueued at 2025-11-12T16:56:16.687193000Z with arguments: #<GlobalID:0x0000000127424078 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mActiveStorage::Blob Load (5.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac] Performing ActiveStorage::AnalyzeJob (Job ID: 3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac) from Async(default) enqueued at 2025-11-12T16:56:16.688059000Z with arguments: #<GlobalID:0x00000001273ca140 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mActiveStorage::Attachment Exists? (9.8ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mActiveStorage::VariantRecord Load (3.0ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mActiveStorage::Blob Update (8.7ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 11], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mActiveStorage::Blob Destroy (0.6ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 11]]
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7] [36m  Disk Storage (0.3ms) [0m[31mDeleted file from key: kdsfdizvi9qinswfae5nm6iaschb[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/kdsfdizvi9qinswfae5nm6iaschb/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7] Performed ActiveStorage::PurgeJob (Job ID: d6c5bf13-1a7b-4b0d-8bd0-f5ca48ad29c7) from Async(default) in 43.28ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mActiveStorage::Attachment Load (6.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mVerification Load (1.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mVerification Update (0.5ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1 WHERE "verifications"."id" = $2[0m  [["updated_at", "2025-11-12 16:56:16.775531"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac] Performed ActiveStorage::AnalyzeJob (Job ID: 3afaf1b4-ff4e-4920-9fe9-fbe0e8b549ac) from Async(default) in 53.57ms
[ID Verification] OpenAI API Response Status: 200
[ID Verification] OpenAI Response Content: ```json
{
  "first_name": "STEVEN",
  "middle_name": "JAMES",
  "last_name": "GERHARDT-KING",
  "date_of_birth": "07/27/1986",
  "is_valid_id": true,
  "confidence_score": 0.95,
  "notes": "Appears to be a valid North Carolina driver license with no obvious signs of tampering."
}
```
[ID Verification] AI API call completed
[ID Verification] Raw AI content: ```json
{
  "first_name": "STEVEN",
  "middle_name": "JAMES",
  "last_name": "GERHARDT-KING",
  "date_of_birth": "07/27/1986",
  "is_valid_id": true,
  "confidence_score": 0.95,
  "notes": "Appears to be a valid North Carolina driver license with no obvious signs of tampering."
}
```
[ID Verification] Parsed AI response: {"first_name" => "STEVEN", "middle_name" => "JAMES", "last_name" => "GERHARDT-KING", "date_of_birth" => "07/27/1986", "is_valid_id" => true, "confidence_score" => 0.95, "notes" => "Appears to be a valid North Carolina driver license with no obvious signs of tampering."}
[ID Verification] Name Comparison:
  Application: First='steven' Middle='' Last='gerhardt-king'
  ID Extracted: First='steven' Middle='james' Last='gerhardt-king'
  First name match: true (steven vs steven)
  Last name match: true (gerhardt-king vs gerhardt-king)
  Middle name: Application has none, ignoring ID middle name
[ID Verification] Final Results:
  ID Valid: true
  Name Match: true
  Overall Verification: PASSED
[ID Verification] Verification result: {id_name_first: "STEVEN", id_name_middle: "JAMES", id_name_last: "GERHARDT-KING", id_valid: true, name_match: true, confidence_score: 0.95, notes: "Appears to be a valid North Carolina driver license with no obvious signs of tampering.", raw_response: {"id" => "chatcmpl-Cb8QmxPZn9pVC83K32OefNCHlcEaO", "object" => "chat.completion", "created" => 1762966580, "model" => "gpt-4o-2024-08-06", "choices" => [{"index" => 0, "message" => {"role" => "assistant", "content" => "```json\n{\n  \"first_name\": \"STEVEN\",\n  \"middle_name\": \"JAMES\",\n  \"last_name\": \"GERHARDT-KING\",\n  \"date_of_birth\": \"07/27/1986\",\n  \"is_valid_id\": true,\n  \"confidence_score\": 0.95,\n  \"notes\": \"Appears to be a valid North Carolina driver license with no obvious signs of tampering.\"\n}\n```", "refusal" => nil, "annotations" => []}, "logprobs" => nil, "finish_reason" => "stop"}], "usage" => {"prompt_tokens" => 963, "completion_tokens" => 93, "total_tokens" => 1056, "prompt_tokens_details" => {"cached_tokens" => 0, "audio_tokens" => 0}, "completion_tokens_details" => {"reasoning_tokens" => 0, "audio_tokens" => 0, "accepted_prediction_tokens" => 0, "rejected_prediction_tokens" => 0}}, "service_tier" => "default", "system_fingerprint" => "fp_cbf1785567"}, debug_info: {app_first: "Steven", app_middle: nil, app_last: "Gerhardt-King", id_first: "STEVEN", id_middle: "JAMES", id_last: "GERHARDT-KING", first_match: true, last_match: true, middle_match: true, id_valid: true}}
[Verification Controller] Verification result: PASSED
[Verification Controller] ID Valid: true, Name Match: true
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:79:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mVerification Update (3.4ms)[0m  [1m[33mUPDATE "verifications" SET "updated_at" = $1, "id_name_first" = $2, "id_name_last" = $3, "id_valid" = $4, "name_match" = $5, "verification_status" = $6, "ai_response" = $7, "id_name_middle" = $8 WHERE "verifications"."id" = $9[0m  [["updated_at", "2025-11-12 16:56:26.820662"], ["id_name_first", "STEVEN"], ["id_name_last", "GERHARDT-KING"], ["id_valid", true], ["name_match", true], ["verification_status", "verified"], ["ai_response", "{\"id_name_first\":\"STEVEN\",\"id_name_middle\":\"JAMES\",\"id_name_last\":\"GERHARDT-KING\",\"id_valid\":true,\"name_match\":true,\"confidence_score\":0.95,\"notes\":\"Appears to be a valid North Carolina driver license with no obvious signs of tampering.\",\"raw_response\":{\"id\":\"chatcmpl-Cb8QmxPZn9pVC83K32OefNCHlcEaO\",\"object\":\"chat.completion\",\"created\":1762966580,\"model\":\"gpt-4o-2024-08-06\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"first_name\\\": \\\"STEVEN\\\",\\n  \\\"middle_name\\\": \\\"JAMES\\\",\\n  \\\"last_name\\\": \\\"GERHARDT-KING\\\",\\n  \\\"date_of_birth\\\": \\\"07/27/1986\\\",\\n  \\\"is_valid_id\\\": true,\\n  \\\"confidence_score\\\": 0.95,\\n  \\\"notes\\\": \\\"Appears to be a valid North Carolina driver license with no obvious signs of tampering.\\\"\\n}\\n```\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":963,\"completion_tokens\":93,\"total_tokens\":1056,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_cbf1785567\"},\"debug_info\":{\"app_first\":\"Steven\",\"app_middle\":null,\"app_last\":\"Gerhardt-King\",\"id_first\":\"STEVEN\",\"id_middle\":\"JAMES\",\"id_last\":\"GERHARDT-KING\",\"first_match\":true,\"last_match\":true,\"middle_match\":true,\"id_valid\":true}}"], ["id_name_middle", "JAMES"], ["id", 2]]
  â†³ app/controllers/api/v1/verifications_controller.rb:79:in 'Api::V1::VerificationsController#verify_id'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/verifications_controller.rb:79:in 'Api::V1::VerificationsController#verify_id'
Completed 201 Created in 10197ms (Views: 0.3ms | ActiveRecord: 13.8ms (14 queries, 1 cached) | GC: 30.5ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:56:36 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (2.5ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 59ms (Views: 0.2ms | ActiveRecord: 27.6ms (33 queries, 0 cached) | GC: 1.6ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-12 16:56:36 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-12"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-12"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 7.7ms (33 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mVerification Load (1.3ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" ORDER BY "verifications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVerification Load (2.3ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" ORDER BY "verifications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVerification Load (0.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" ORDER BY "verifications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRentalApplication Load (2.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:23:08 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 8.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:23:16 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (2.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 6.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:29:29 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 11.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:29:31 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:29:32 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:29:32 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 1.4ms (4 queries, 0 cached) | GC: 16.3ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:29:45 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:29:45 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:55:12 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (19.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 28.1ms (1 query, 0 cached) | GC: 1.8ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:55:12 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 4.5ms (4 queries, 0 cached) | GC: 1.3ms)


  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1 /* loading for pp */ LIMIT $2[0m  [["user_id", 18], ["LIMIT", 11]]
  [1m[36mVerification Load (2.7ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" ORDER BY "verifications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" ORDER BY "rental_applications"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" ORDER BY "rental_applications"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVerification Load (1.0ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 LIMIT $2[0m  [["rental_application_id", 1], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (1.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (1.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  [1m[36mVerification Destroy (0.4ms)[0m  [1m[31mDELETE FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 1]]
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1 LIMIT $2[0m  [["rental_application_id", 1], ["LIMIT", 1]]
  [1m[36mRentalApplication Destroy (1.1ms)[0m  [1m[31mDELETE FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: d219dca3-fbab-449c-adae-0b1b0c5e37ae) to Async(default) with arguments: #<GlobalID:0x00000001244a8768 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae] Performing ActiveStorage::PurgeJob (Job ID: d219dca3-fbab-449c-adae-0b1b0c5e37ae) from Async(default) enqueued at 2025-11-12T19:56:17.699839000Z with arguments: #<GlobalID:0x00000001213fe5b8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mActiveStorage::Attachment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mActiveStorage::VariantRecord Load (1.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mActiveStorage::Blob Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae] [36m  Disk Storage (0.5ms) [0m[31mDeleted file from key: htpik1a3igt18a02j0ddxigszgfj[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/htpik1a3igt18a02j0ddxigszgfj/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [d219dca3-fbab-449c-adae-0b1b0c5e37ae] Performed ActiveStorage::PurgeJob (Job ID: d219dca3-fbab-449c-adae-0b1b0c5e37ae) from Async(default) in 36.84ms
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" ORDER BY "rental_applications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" ORDER BY "rental_applications"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Load (2.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mRentalApplication Update (0.5ms)[0m  [1m[33mUPDATE "rental_applications" SET "status" = $1, "updated_at" = $2 WHERE "rental_applications"."id" = $3[0m  [["status", 1], ["updated_at", "2025-11-12 19:57:07.719680"], ["id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-12 19:57:10 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-12 19:57:10 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" ORDER BY "properties"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-17 15:46:35 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (144.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (3.8ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (3.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (1.5ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 212ms (Views: 1.7ms | ActiveRecord: 201.2ms (33 queries, 0 cached) | GC: 1.3ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-17 15:46:35 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-17"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 20], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-17"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 4.1ms (33 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-17 15:46:36 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (3.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-17 15:46:36 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.1ms)


  [1m[36mProperty Load (48.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" ORDER BY "properties"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-18 16:21:00 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 11.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-18 16:21:00 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 23ms (Views: 0.5ms | ActiveRecord: 4.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-18 16:24:42 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 35.2ms (2 queries, 0 cached) | GC: 1.8ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-18 16:24:43 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-18 16:24:46 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 26ms (Views: 0.1ms | ActiveRecord: 15.3ms (4 queries, 0 cached) | GC: 1.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-18 16:24:46 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-18 16:24:50 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-18 16:24:50 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-18 16:24:56 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (11.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 13.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-18 16:24:56 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUnit Load (1.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1 /* loading for pp */ LIMIT $2[0m  [["property_id", 10], ["LIMIT", 11]]
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mLease Load (1.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-19 11:59:56 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 52ms (Views: 0.4ms | ActiveRecord: 17.0ms (1 query, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 11:59:56 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 7.0ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:23 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 67ms (Views: 0.4ms | ActiveRecord: 44.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:23 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.5ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/leases" for 127.0.0.1 at 2025-11-19 12:01:32 +0000
Processing by Api::V1::LeasesController#create as */*
  Parameters: {"rental_application_id" => 2, "lease" => {"rental_application_id" => 2}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1 AND "rental_applications"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:11:in 'Api::V1::LeasesController#create'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1 LIMIT $2[0m  [["rental_application_id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:23:in 'Api::V1::LeasesController#create'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:30:in 'Api::V1::LeasesController#create'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:31:in 'Api::V1::LeasesController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/leases_controller.rb:37:in 'Api::V1::LeasesController#create'
  [1m[36mLease Create (11.4ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 2], ["property_id", 8], ["unit_id", 20], ["signed", true], ["signed_date", "2025-11-19"], ["move_in_date", "2025-12-01"], ["move_out_date", nil], ["created_at", "2025-11-19 12:01:32.337766"], ["updated_at", "2025-11-19 12:01:32.337766"]]
  â†³ app/controllers/api/v1/leases_controller.rb:37:in 'Api::V1::LeasesController#create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/leases_controller.rb:37:in 'Api::V1::LeasesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/leases_controller.rb:39:in 'Api::V1::LeasesController#create'
  [1m[36mLeaseTenant Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 18], ["lease_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:39:in 'Api::V1::LeasesController#create'
  [1m[36mLeaseTenant Create (2.4ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 1], ["user_id", 18], ["created_at", "2025-11-19 12:01:32.367071"], ["updated_at", "2025-11-19 12:01:32.367071"]]
  â†³ app/controllers/api/v1/leases_controller.rb:39:in 'Api::V1::LeasesController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/leases_controller.rb:39:in 'Api::V1::LeasesController#create'
Completed 201 Created in 52ms (Views: 0.2ms | ActiveRecord: 25.3ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:35 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 6.1ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:35 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 12:01:38 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (6.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 12.1ms (5 queries, 0 cached) | GC: 0.9ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 12:01:38 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (1.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.4ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:41 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 2.9ms (5 queries, 0 cached) | GC: 0.7ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 12:01:41 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 20:10:53 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (47.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (6.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (3.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 76ms (Views: 0.6ms | ActiveRecord: 84.0ms (5 queries, 0 cached) | GC: 1.1ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 20:10:53 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 20:11:01 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 1.5ms (5 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-19 20:11:01 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 20:18:47 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (3.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (1.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 47ms (Views: 0.2ms | ActiveRecord: 38.0ms (5 queries, 0 cached) | GC: 1.4ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-19 20:18:47 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.5ms (5 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-19 20:26:37 +0000
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20251119202501_add_payment_fields_to_payments.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.3) lib/active_record/migration.rb:666:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-19 20:29:00 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20251119202501_add_payment_fields_to_payments.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddPaymentFieldsToPayments (20251119202501)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mALTER TABLE "payments" ADD "payment_month" date[0m
  [1m[35m (6.3ms)[0m  [1m[35mALTER TABLE "payments" ADD "stripe_payment_intent_id" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ADD "stripe_charge_id" character varying[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_payments_on_payment_month" ON "payments" ("payment_month")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251119202501') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mLease Load (2.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mRentalApplication Load (5.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-20 11:01:13 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 58ms (Views: 0.2ms | ActiveRecord: 14.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 11:01:14 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 66ms (Views: 0.3ms | ActiveRecord: 27.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 11:01:14 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:01:18 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 5.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:01:18 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:18 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 17ms (Views: 0.1ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:18 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:22 +0000
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:22 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:01:22 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mLease Load (1.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 25ms (Views: 0.3ms | ActiveRecord: 7.1ms (2 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (41.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (33.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (5.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  [1m[36mLease Load (3.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 57ms (Views: 0.1ms | ActiveRecord: 73.5ms (2 queries, 0 cached) | GC: 0.0ms)


Completed 404 Not Found in 46ms (Views: 0.0ms | ActiveRecord: 60.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:01:22 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:01:25 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (1.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 4.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:01:25 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:25 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 4ms (Views: 0.1ms | ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:01:26 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Filter chain halted as :set_active_lease rendered or redirected
Completed 404 Not Found in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 11:01:28 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 30ms (Views: 0.7ms | ActiveRecord: 3.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 11:01:28 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (4.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 6.8ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (8.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mLease Update (3.3ms)[0m  [1m[33mUPDATE "leases" SET "move_in_date" = $1, "updated_at" = $2 WHERE "leases"."id" = $3[0m  [["move_in_date", "2025-10-20"], ["updated_at", "2025-11-20 11:03:18.398644"], ["id", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:03:20 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 13.0ms (1 query, 0 cached) | GC: 1.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 11:03:20 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 35ms (Views: 0.1ms | ActiveRecord: 15.7ms (5 queries, 0 cached) | GC: 3.3ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:03:22 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 3.7ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:03:22 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:03:22 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:03:22 +0000
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mLease Load (2.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (3.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  [1m[36mPayment Load (4.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (7.1ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 18], ["lease_id", 1], ["amount", "1000.0"], ["due_date", "2025-11-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-11-20 11:03:22.495667"], ["updated_at", "2025-11-20 11:03:22.495667"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mPayment Create (6.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 18], ["lease_id", 1], ["amount", "1000.0"], ["due_date", "2025-11-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-11-20 11:03:22.496543"], ["updated_at", "2025-11-20 11:03:22.496543"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 0.1ms | ActiveRecord: 17.0ms (9 queries, 2 cached) | GC: 1.0ms)


  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 23.0ms (9 queries, 2 cached) | GC: 1.1ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:03:24 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:03:24 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:03:24 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mLease Load (3.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mPayment Load (2.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 6.7ms (5 queries, 0 cached) | GC: 0.5ms)


  [1m[36mPayment Load (2.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 16ms (Views: 0.0ms | ActiveRecord: 10.6ms (5 queries, 0 cached) | GC: 0.5ms)


  [1m[36mRentalApplication Load (2.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.5ms (8 queries, 3 cached) | GC: 0.2ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:03:24 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms (8 queries, 3 cached) | GC: 0.2ms)


Started POST "/api/v1/payments/create_intent" for 127.0.0.1 at 2025-11-20 11:03:27 +0000
Processing by Api::V1::PaymentsController#create_intent as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mPayment Update (3.7ms)[0m  [1m[33mUPDATE "payments" SET "updated_at" = $1, "stripe_payment_intent_id" = $2 WHERE "payments"."id" = $3[0m  [["updated_at", "2025-11-20 11:03:29.028863"], ["stripe_payment_intent_id", "cs_test_a10zkhbjK5a5xhrzYPqpYy6pGAZl6ktcQprwFajJderO2Ksejqh0mhR3pw"], ["id", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
Completed 200 OK in 1385ms (Views: 0.3ms | ActiveRecord: 8.6ms (8 queries, 2 cached) | GC: 0.2ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:04:13 +0000
Started POST "/api/v1/payments/confirm" for 127.0.0.1 at 2025-11-20 11:04:13 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
Processing by Api::V1::PaymentsController#confirm as */*
  Parameters: {"session_id" => "cs_test_a10zkhbjK5a5xhrzYPqpYy6pGAZl6ktcQprwFajJderO2Ksejqh0mhR3pw", "payment" => {}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:13 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:04:13 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (1.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.9ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 3.8ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 4.5ms (8 queries, 3 cached) | GC: 0.0ms)


  [1m[36mPayment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."stripe_payment_intent_id" = $2 LIMIT $3[0m  [["lease_id", 1], ["stripe_payment_intent_id", "cs_test_a10zkhbjK5a5xhrzYPqpYy6pGAZl6ktcQprwFajJderO2Ksejqh0mhR3pw"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:110:in 'Api::V1::PaymentsController#confirm'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."stripe_payment_intent_id" = $2[0m  [["lease_id", 1], ["stripe_payment_intent_id", "cs_test_a10zkhbjK5a5xhrzYPqpYy6pGAZl6ktcQprwFajJderO2Ksejqh0mhR3pw"]]
  â†³ app/controllers/api/v1/payments_controller.rb:117:in 'Api::V1::PaymentsController#confirm'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mPayment Update (2.0ms)[0m  [1m[33mUPDATE "payments" SET "paid_date" = $1, "status" = $2, "updated_at" = $3, "stripe_charge_id" = $4 WHERE "payments"."id" = $5[0m  [["paid_date", "2025-11-20"], ["status", 1], ["updated_at", "2025-11-20 11:04:14.094999"], ["stripe_charge_id", "pi_3SVVeo1XXhLTz4vr007wBBBm"], ["id", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
Completed 200 OK in 590ms (Views: 0.4ms | ActiveRecord: 7.7ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:14 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:04:14 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (3.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.9ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 7.1ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mPayment Load (36.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 53ms (Views: 0.1ms | ActiveRecord: 40.0ms (8 queries, 3 cached) | GC: 29.5ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:04:16 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (1.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 5.0ms (5 queries, 0 cached) | GC: 1.4ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:04:16 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.6ms (5 queries, 0 cached) | GC: 1.2ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:16 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.5ms (8 queries, 3 cached) | GC: 0.5ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:16 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.1ms (8 queries, 3 cached) | GC: 0.5ms)


Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:04:22 +0000
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:22 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (1.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (1.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (1.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 7.6ms (5 queries, 0 cached) | GC: 0.9ms)


  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:04:22 +0000
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 6.1ms (8 queries, 3 cached) | GC: 1.6ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:04:22 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.4ms (5 queries, 0 cached) | GC: 0.7ms)


  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.8ms (8 queries, 3 cached) | GC: 0.4ms)


Started POST "/api/v1/payments/create_intent" for 127.0.0.1 at 2025-11-20 11:04:30 +0000
Processing by Api::V1::PaymentsController#create_intent as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mPayment Update (4.1ms)[0m  [1m[33mUPDATE "payments" SET "updated_at" = $1, "stripe_payment_intent_id" = $2 WHERE "payments"."id" = $3[0m  [["updated_at", "2025-11-20 11:04:31.147507"], ["stripe_payment_intent_id", "cs_test_a1steLpWtLojopZyWcxdnfQ4viVluiBnAbom4q72HQ59P3P9W6TxVQJRMo"], ["id", 2]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
Completed 200 OK in 646ms (Views: 0.4ms | ActiveRecord: 9.4ms (8 queries, 2 cached) | GC: 2.4ms)


  [1m[36mPayment Load (3.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (1.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" ORDER BY "payments"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:05:09 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 8ms (Views: 0.8ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:05:09 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:05:09 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Parameters: {"payment" => {}}
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (2.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.5ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 0.5ms | ActiveRecord: 9.0ms (5 queries, 0 cached) | GC: 1.6ms)


  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 21ms (Views: 0.1ms | ActiveRecord: 6.8ms (8 queries, 3 cached) | GC: 1.6ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:05:13 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:05:13 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:05:13 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (1.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:73:in 'PaymentCalculationService#last_paid_date'
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 4.7ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 13ms (Views: 0.0ms | ActiveRecord: 2.3ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:10:20 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 32ms (Views: 0.1ms | ActiveRecord: 10.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:20 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:20 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (4.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUser Load (20.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnitMonthlyPrice Load (1.8ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 48ms (Views: 0.1ms | ActiveRecord: 8.6ms (5 queries, 0 cached) | GC: 16.7ms)


  [1m[36mLease Load (25.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 61ms (Views: 0.1ms | ActiveRecord: 57.0ms (12 queries, 0 cached) | GC: 18.1ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (2.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (1.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 5.6ms (5 queries, 0 cached) | GC: 1.9ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.6ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:23 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 6.8ms (12 queries, 0 cached) | GC: 1.3ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:23 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 28ms (Views: 0.1ms | ActiveRecord: 8.3ms (12 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:25 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:25 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (0.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.8ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.9ms (5 queries, 0 cached) | GC: 0.2ms)


  [1m[36mPayment Load (1.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:25 +0000
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 7.2ms (12 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:25 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
Processing by Api::V1::PaymentsController#outstanding as */*
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  Parameters: {"payment" => {}}
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 3.4ms (5 queries, 0 cached) | GC: 0.7ms)


  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 4.5ms (12 queries, 0 cached) | GC: 0.7ms)


Started POST "/api/v1/payments/create_intent" for 127.0.0.1 at 2025-11-20 11:10:28 +0000
Processing by Api::V1::PaymentsController#create_intent as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mPayment Update (1.6ms)[0m  [1m[33mUPDATE "payments" SET "updated_at" = $1, "stripe_payment_intent_id" = $2 WHERE "payments"."id" = $3[0m  [["updated_at", "2025-11-20 11:10:29.356636"], ["stripe_payment_intent_id", "cs_test_a1zmhKAiYxJ3h7Z6FLd7JZ8ZItxP4hCo37bj49EZoBLC6rmCn0g83rbBIG"], ["id", 2]]
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:75:in 'block in Api::V1::PaymentsController#create_intent'
Completed 200 OK in 785ms (Views: 0.2ms | ActiveRecord: 8.3ms (11 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/payments/confirm" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
Processing by Api::V1::PaymentsController#confirm as */*
  Parameters: {"session_id" => "cs_test_a1zmhKAiYxJ3h7Z6FLd7JZ8ZItxP4hCo37bj49EZoBLC6rmCn0g83rbBIG", "payment" => {}}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:43:in 'Api::V1::AuthController#authenticate_user'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Parameters: {"payment" => {}}
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (1.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (2.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (4.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (3.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (3.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.5ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 10.2ms (12 queries, 0 cached) | GC: 0.0ms)


  [1m[36mPayment Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."stripe_payment_intent_id" = $2 LIMIT $3[0m  [["lease_id", 1], ["stripe_payment_intent_id", "cs_test_a1zmhKAiYxJ3h7Z6FLd7JZ8ZItxP4hCo37bj49EZoBLC6rmCn0g83rbBIG"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:110:in 'Api::V1::PaymentsController#confirm'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."stripe_payment_intent_id" = $2[0m  [["lease_id", 1], ["stripe_payment_intent_id", "cs_test_a1zmhKAiYxJ3h7Z6FLd7JZ8ZItxP4hCo37bj49EZoBLC6rmCn0g83rbBIG"]]
  â†³ app/controllers/api/v1/payments_controller.rb:117:in 'Api::V1::PaymentsController#confirm'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mPayment Update (14.9ms)[0m  [1m[33mUPDATE "payments" SET "paid_date" = $1, "status" = $2, "updated_at" = $3, "stripe_charge_id" = $4 WHERE "payments"."id" = $5[0m  [["paid_date", "2025-11-20"], ["status", 1], ["updated_at", "2025-11-20 11:10:50.945318"], ["stripe_charge_id", "pi_3SVVlD1XXhLTz4vr1NSmAZHG"], ["id", 2]]
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:121:in 'block in Api::V1::PaymentsController#confirm'
Completed 200 OK in 526ms (Views: 0.2ms | ActiveRecord: 28.2ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:50 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mLease Load (6.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (0.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 9.0ms (5 queries, 0 cached) | GC: 0.0ms)


  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 7.9ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:53 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (5.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 8.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:53 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:53 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 2.8ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:53 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 2.3ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:55 +0000
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:55 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mLease Load (1.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.5ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 9.2ms (5 queries, 0 cached) | GC: 0.0ms)


  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-11-20 11:10:55 +0000
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 5.4ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:55 +0000
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 1], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:76:in 'PaymentCalculationService#last_paid_date'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.0ms (5 queries, 0 cached) | GC: 0.0ms)


  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.3ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:56 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 11:10:56 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:56 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 2.2ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 11:10:56 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.3ms (12 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:46:23 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 3 pending migrations:

db/migrate/20251120114101_add_role_to_users.rb
db/migrate/20251120114159_create_user_properties.rb
db/migrate/20251120114257_create_maintenance_requests.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.3) lib/active_record/migration.rb:666:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:46:33 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 3 pending migrations:

db/migrate/20251120114101_add_role_to_users.rb
db/migrate/20251120114159_create_user_properties.rb
db/migrate/20251120114257_create_maintenance_requests.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:46:37 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 3 pending migrations:

db/migrate/20251120114101_add_role_to_users.rb
db/migrate/20251120114159_create_user_properties.rb
db/migrate/20251120114257_create_maintenance_requests.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:48:20 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 3 pending migrations:

db/migrate/20251120114101_add_role_to_users.rb
db/migrate/20251120114159_create_user_properties.rb
db/migrate/20251120114257_create_maintenance_requests.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 11:51:57 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 3 pending migrations:

db/migrate/20251120114101_add_role_to_users.rb
db/migrate/20251120114159_create_user_properties.rb
db/migrate/20251120114257_create_maintenance_requests.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUser Load (4.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (10.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddRoleToUsers (20251120114101)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251120114101') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserProperties (20251120114159)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "user_properties" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_4924e05fff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_50c0d69da9"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_user_id" ON "user_properties" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_property_id" ON "user_properties" ("property_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_properties_on_user_id_and_property_id" ON "user_properties" ("user_id", "property_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251120114159') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMaintenanceRequests (20251120114257)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "maintenance_requests" ("id" bigserial primary key, "ticket_number" character varying NOT NULL, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint, "category" character varying NOT NULL, "description" text NOT NULL, "preferred_entry_time" text, "resident_must_be_home" boolean DEFAULT FALSE NOT NULL, "urgency_level" character varying NOT NULL, "status" character varying DEFAULT 'Submitted' NOT NULL, "assigned_maintenance_user_id" bigint, "admin_notes" text, "resident_visible_notes" text, "resolution_notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_79e4eb887e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_779301eeec"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
, CONSTRAINT "fk_rails_8c23f3be94"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
, CONSTRAINT "fk_rails_d74a986933"
FOREIGN KEY ("assigned_maintenance_user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_user_id" ON "maintenance_requests" ("user_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_property_id" ON "maintenance_requests" ("property_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_unit_id" ON "maintenance_requests" ("unit_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_assigned_maintenance_user_id" ON "maintenance_requests" ("assigned_maintenance_user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_maintenance_requests_on_ticket_number" ON "maintenance_requests" ("ticket_number")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_status" ON "maintenance_requests" ("status")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_urgency_level" ON "maintenance_requests" ("urgency_level")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_property_id" ON "maintenance_requests" ("property_id")[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateMaintenanceRequests (20251120114257)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "maintenance_requests" ("id" bigserial primary key, "ticket_number" character varying NOT NULL, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint, "category" character varying NOT NULL, "description" text NOT NULL, "preferred_entry_time" text, "resident_must_be_home" boolean DEFAULT FALSE NOT NULL, "urgency_level" character varying NOT NULL, "status" character varying DEFAULT 'Submitted' NOT NULL, "assigned_maintenance_user_id" bigint, "admin_notes" text, "resident_visible_notes" text, "resolution_notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_79e4eb887e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_779301eeec"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
, CONSTRAINT "fk_rails_8c23f3be94"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
, CONSTRAINT "fk_rails_d74a986933"
FOREIGN KEY ("assigned_maintenance_user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_user_id" ON "maintenance_requests" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_property_id" ON "maintenance_requests" ("property_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_unit_id" ON "maintenance_requests" ("unit_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_assigned_maintenance_user_id" ON "maintenance_requests" ("assigned_maintenance_user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_maintenance_requests_on_ticket_number" ON "maintenance_requests" ("ticket_number")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_status" ON "maintenance_requests" ("status")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_urgency_level" ON "maintenance_requests" ("urgency_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251120114257') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = $1 LIMIT $2[0m  [["role", "super_admin"], ["LIMIT", 1]]
  [1m[36mUser Load (7.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-20 13:22:26 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 6.6ms (1 query, 0 cached) | GC: 1.2ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:22:26 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.0ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 5.8ms (5 queries, 0 cached) | GC: 1.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:22:26 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.3ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:22:28 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (2.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 5.1ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:22:28 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:22:28 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 28ms (Views: 0.1ms | ActiveRecord: 6.1ms (12 queries, 0 cached) | GC: 0.1ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:22:28 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 3.4ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:22:30 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (2.8ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 11.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:22:30 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:23:18 +0000
Processing by Api::V1::MaintenanceRequestsController#create as */*
  Parameters: {"maintenance_request" => {"category" => "Heating/Cooling", "description" => "Thermostat seems to be working but heat won't turn on. ", "preferred_entry_time" => "Morning", "resident_must_be_home" => "true", "urgency_level" => "Urgent"}, "photos" => [#<ActionDispatch::Http::UploadedFile:0x0000000121339d30 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251120-51939-7psta7.jpg>, @content_type="image/jpeg", @original_filename="spacebg.jpg", @headers="Content-Disposition: form-data; name=\"photos[]\"; filename=\"spacebg.jpg\"\r\nContent-Type: image/jpeg\r\n">]}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (move_in_date <= $3) AND (move_out_date IS NULL OR move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:67:in 'Api::V1::MaintenanceRequestsController#create'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::StatementInvalid (PG::AmbiguousColumn: ERROR:  column reference "move_in_date" is ambiguous
LINE 1: ...= $1 AND "rental_applications"."status" = $2 AND (move_in_da...
                                                             ^
)
Caused by: PG::AmbiguousColumn (ERROR:  column reference "move_in_date" is ambiguous
LINE 1: ...= $1 AND "rental_applications"."status" = $2 AND (move_in_da...
                                                             ^
)

Information for: ActiveRecord::StatementInvalid (PG::AmbiguousColumn: ERROR:  column reference "move_in_date" is ambiguous
LINE 1: ...= $1 AND "rental_applications"."status" = $2 AND (move_in_da...
                                                             ^
):
  

Information for cause: PG::AmbiguousColumn (ERROR:  column reference "move_in_date" is ambiguous
LINE 1: ...= $1 AND "rental_applications"."status" = $2 AND (move_in_da...
                                                             ^
):
  
app/controllers/api/v1/maintenance_requests_controller.rb:67:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mLease Load (1.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:24:49 +0000
Processing by Api::V1::MaintenanceRequestsController#create as */*
  Parameters: {"maintenance_request" => {"category" => "Heating/Cooling", "description" => "Thermostat seems to be working but heat won't turn on. ", "preferred_entry_time" => "Morning", "resident_must_be_home" => "true", "urgency_level" => "Urgent"}, "photos" => [#<ActionDispatch::Http::UploadedFile:0x000000012663f7a0 @tempfile=#<Tempfile:/var/folders/ff/4rzhwbmx1hs3ck6h0q123pfh0000gn/T/RackMultipart20251120-51939-mkhljs.jpg>, @content_type="image/jpeg", @original_filename="spacebg.jpg", @headers="Content-Disposition: form-data; name=\"photos[]\"; filename=\"spacebg.jpg\"\r\nContent-Type: image/jpeg\r\n">]}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:67:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:76:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:77:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/maintenance_request.rb:24:in 'MaintenanceRequest#generate_ticket_number'
  [1m[36mMaintenanceRequest Load (1.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" ORDER BY "maintenance_requests"."ticket_number" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/maintenance_request.rb:24:in 'MaintenanceRequest#generate_ticket_number'
  [1m[36mMaintenanceRequest Create (4.2ms)[0m  [1m[32mINSERT INTO "maintenance_requests" ("ticket_number", "user_id", "property_id", "unit_id", "category", "description", "preferred_entry_time", "resident_must_be_home", "urgency_level", "status", "assigned_maintenance_user_id", "admin_notes", "resident_visible_notes", "resolution_notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["ticket_number", "MR-1001"], ["user_id", 18], ["property_id", 8], ["unit_id", 20], ["category", "Heating/Cooling"], ["description", "Thermostat seems to be working but heat won't turn on. "], ["preferred_entry_time", "Morning"], ["resident_must_be_home", true], ["urgency_level", "Urgent"], ["status", "Submitted"], ["assigned_maintenance_user_id", nil], ["admin_notes", nil], ["resident_visible_notes", nil], ["resolution_notes", nil], ["created_at", "2025-11-20 13:24:49.573868"], ["updated_at", "2025-11-20 13:24:49.573868"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:79:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_properties" ON "user_properties"."user_id" = "users"."id" WHERE "users"."role" = $1 AND "user_properties"."property_id" = $2 ORDER BY "users"."id" ASC LIMIT $3[0m  [["role", "maintenance"], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/models/maintenance_request.rb:40:in 'MaintenanceRequest#auto_assign_maintenance_user'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:79:in 'Api::V1::MaintenanceRequestsController#create'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "pb5lp7193aoltwqbl497ss3gtrdg"], ["filename", "spacebg.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 24260], ["checksum", "2xBej9tMxJmp5Qky4y6dIA=="], ["created_at", "2025-11-20 13:24:49.615240"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "photos"], ["record_type", "MaintenanceRequest"], ["record_id", 1], ["blob_id", 13], ["created_at", "2025-11-20 13:24:49.617568"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mMaintenanceRequest Update (0.6ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "updated_at" = $1 WHERE "maintenance_requests"."id" = $2[0m  [["updated_at", "2025-11-20 13:24:49.618794"], ["id", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:83:in 'block in Api::V1::MaintenanceRequestsController#create'
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: pb5lp7193aoltwqbl497ss3gtrdg (checksum: 2xBej9tMxJmp5Qky4y6dIA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7) to Async(default) with arguments: #<GlobalID:0x0000000124c5e368 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
Completed 201 Created in 151ms (Views: 0.1ms | ActiveRecord: 44.8ms (12 queries, 0 cached) | GC: 20.8ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:24:49 +0000
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mActiveStorage::Blob Load (3.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7] Performing ActiveStorage::AnalyzeJob (Job ID: 9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7) from Async(default) enqueued at 2025-11-20T13:24:49.633572000Z with arguments: #<GlobalID:0x0000000126419318 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mActiveStorage::Blob Update (1.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1[0m  [["blob_id", 13]]
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mMaintenanceRequest Load (0.4ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."id" = $1[0m  [["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mMaintenanceRequest Update (1.2ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "updated_at" = $1 WHERE "maintenance_requests"."id" = $2[0m  [["updated_at", "2025-11-20 13:24:49.725041"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7] Performed ActiveStorage::AnalyzeJob (Job ID: 9c6b80a3-e3fe-498e-a0d8-8ed39a00e7b7) from Async(default) in 68.78ms
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (2.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (1.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 45ms (Views: 0.1ms | ActiveRecord: 38.7ms (7 queries, 0 cached) | GC: 1.5ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:24:53 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 20.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:24:54 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:24:54 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 12.2ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:24:54 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (5.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 8.1ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:24:55 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.6ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:24:55 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.9ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.8ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:25:02 +0000
Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 13:25:02 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mLease Load (1.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.9ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 4.3ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mRentalApplication Load (1.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 5.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:25:02 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 4.5ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 13:25:02 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (3.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 6.4ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 13:28:02 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 23ms (Views: 0.2ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/users" for 127.0.0.1 at 2025-11-20 13:28:17 +0000
Processing by Api::V1::UsersController#create as */*
  Parameters: {"user" => {"email" => "stevenking86+3@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}}
[31mUnpermitted parameters: :password, :password_confirmation. Context: { controller: Api::V1::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000122d39898>, params: {"user" => {"email" => "stevenking86+3@gmail.com", "password" => "Password123!", "password_confirmation" => "Password123!"}, "controller" => "api/v1/users", "action" => "create"} }[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Exists? (7.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86+3@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "stevenking86+3@gmail.com"], ["created_at", "2025-11-20 13:28:17.472394"], ["updated_at", "2025-11-20 13:28:17.472394"], ["password_digest", nil], ["role", nil]]
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/users_controller.rb:19:in 'Api::V1::UsersController#create'
Completed 201 Created in 49ms (Views: 0.8ms | ActiveRecord: 12.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:28:17 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:28:17 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (2.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "role" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2025-11-20 13:28:35.374616"], ["role", "property_admin"], ["id", 20]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 13:28:38 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 13ms (Views: 1.3ms | ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:28:38 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:28:38 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (1.8ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 2.1ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:28:38 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.4ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 1.3ms)


  [1m[36mLease Load (2.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" ORDER BY "leases"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUserProperty Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 20], ["property_id", 8], ["LIMIT", 1]]
  [1m[36mUserProperty Create (10.6ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["property_id", 8], ["created_at", "2025-11-20 13:29:10.269040"], ["updated_at", "2025-11-20 13:29:10.269040"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 13:29:12 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:29:12 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (1.2ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.7ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 23ms (Views: 2.1ms | ActiveRecord: 3.9ms (9 queries, 0 cached) | GC: 2.4ms)


Started GET "/api/v1/maintenance_requests/maintenance_users?property_id=8" for 127.0.0.1 at 2025-11-20 13:29:18 +0000
Processing by Api::V1::MaintenanceRequestsController#maintenance_users as */*
  Parameters: {"property_id" => "8", "maintenance_request" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1 AND "properties"."id" = $2 LIMIT $3[0m  [["user_id", 20], ["id", 8], ["LIMIT", 1]]
  â†³ app/models/user.rb:58:in 'User#can_access_property?'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users"."id", "users"."email" FROM "users" INNER JOIN "user_properties" ON "user_properties"."user_id" = "users"."id" WHERE "users"."role" = $1 AND "user_properties"."property_id" = $2[0m  [["role", "maintenance"], ["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:42:in 'Enumerable#map'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/maintenance_requests/1" for 127.0.0.1 at 2025-11-20 13:29:53 +0000
Processing by Api::V1::MaintenanceRequestsController#update as */*
  Parameters: {"maintenance_request" => {"urgency_level" => "Urgent", "status" => "Submitted", "assigned_maintenance_user_id" => nil, "admin_notes" => "Please take care of this.  Happened last year, only required a battery swap. ", "resident_visible_notes" => "We are sorry this is happening.  Maintenance will get to this on Friday."}, "id" => "1"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (1.1ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:178:in 'Api::V1::MaintenanceRequestsController#set_maintenance_request'
  [1m[36mProperty Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1 AND "properties"."id" = $2 LIMIT $3[0m  [["user_id", 20], ["id", 8], ["LIMIT", 1]]
  â†³ app/models/user.rb:58:in 'User#can_access_property?'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mMaintenanceRequest Update (0.6ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "admin_notes" = $1, "resident_visible_notes" = $2, "updated_at" = $3 WHERE "maintenance_requests"."id" = $4[0m  [["admin_notes", "Please take care of this.  Happened last year, only required a battery swap. "], ["resident_visible_notes", "We are sorry this is happening.  Maintenance will get to this on Friday."], ["updated_at", "2025-11-20 13:29:53.133956"], ["id", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:231:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 58ms (Views: 0.3ms | ActiveRecord: 12.4ms (10 queries, 0 cached) | GC: 5.1ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:29:53 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.5ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.4ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 3.0ms (9 queries, 0 cached) | GC: 1.9ms)


Started GET "/api/v1/maintenance_requests/maintenance_users?property_id=8" for 127.0.0.1 at 2025-11-20 13:29:57 +0000
Processing by Api::V1::MaintenanceRequestsController#maintenance_users as */*
  Parameters: {"property_id" => "8", "maintenance_request" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1 AND "properties"."id" = $2 LIMIT $3[0m  [["user_id", 20], ["id", 8], ["LIMIT", 1]]
  â†³ app/models/user.rb:58:in 'User#can_access_property?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users"."id", "users"."email" FROM "users" INNER JOIN "user_properties" ON "user_properties"."user_id" = "users"."id" WHERE "users"."role" = $1 AND "user_properties"."property_id" = $2[0m  [["role", "maintenance"], ["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:42:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/maintenance_requests/1" for 127.0.0.1 at 2025-11-20 13:30:01 +0000
Processing by Api::V1::MaintenanceRequestsController#update as */*
  Parameters: {"maintenance_request" => {"urgency_level" => "Urgent", "status" => "Scheduled", "assigned_maintenance_user_id" => nil, "admin_notes" => "Please take care of this.  Happened last year, only required a battery swap. ", "resident_visible_notes" => "We are sorry this is happening.  Maintenance will get to this on Friday."}, "id" => "1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.4ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:178:in 'Api::V1::MaintenanceRequestsController#set_maintenance_request'
  [1m[36mProperty Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1 AND "properties"."id" = $2 LIMIT $3[0m  [["user_id", 20], ["id", 8], ["LIMIT", 1]]
  â†³ app/models/user.rb:58:in 'User#can_access_property?'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mMaintenanceRequest Update (0.7ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "status" = $1, "updated_at" = $2 WHERE "maintenance_requests"."id" = $3[0m  [["status", "Scheduled"], ["updated_at", "2025-11-20 13:30:01.665911"], ["id", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:109:in 'Api::V1::MaintenanceRequestsController#update'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:231:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 5.4ms (10 queries, 0 cached) | GC: 2.5ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:30:01 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.4ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.1ms (9 queries, 0 cached) | GC: 0.8ms)


  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "role" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2025-11-20 13:30:19.985464"], ["role", "maintenance"], ["id", 20]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 13:30:24 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:30:24 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:30:24 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:30:25 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.9ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.5ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 3.5ms (9 queries, 0 cached) | GC: 1.5ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:30:25 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.2ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 2.3ms (9 queries, 0 cached) | GC: 1.2ms)


  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (3.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "role" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2025-11-20 13:30:43.080865"], ["role", "property_admin"], ["id", 20]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-20 13:30:45 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (7.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 7.3ms (1 query, 0 cached) | GC: 1.1ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:30:45 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 3.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 13:30:45 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:30:45 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (1.4ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.6ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 5.5ms (9 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 13:30:45 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mProperty Pluck (0.3ms)[0m  [1m[34mSELECT "properties"."id" FROM "properties" INNER JOIN "user_properties" ON "properties"."id" = "user_properties"."property_id" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:12:in 'Api::V1::MaintenanceRequestsController#index'
  [1m[36mMaintenanceRequest Load (0.5ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["property_id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 3.4ms (9 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 14:09:27 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (2.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (2.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 64ms (Views: 0.3ms | ActiveRecord: 44.0ms (7 queries, 0 cached) | GC: 0.7ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-11-20 14:09:27 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.6ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
  [1m[36mActiveStorage::Attachment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'Api::V1::MaintenanceRequestsController#maintenance_request_json'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:243:in 'block in Api::V1::MaintenanceRequestsController#maintenance_request_json'
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 2.5ms (7 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 14:09:36 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (6.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (4.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (1.8ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 12.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-20 14:09:36 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (1.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 14:09:36 +0000
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.9ms (5 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (4.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (2.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 9.6ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-20 14:09:36 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-20"], [nil, "2025-11-20"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:146:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:33:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 3.0ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 14:09:38 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-20 14:09:38 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-21 20:48:48 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (198.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 251ms (Views: 1.6ms | ActiveRecord: 227.6ms (1 query, 0 cached) | GC: 2.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 20:48:49 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (3.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (3.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (2.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 37ms (Views: 1.8ms | ActiveRecord: 11.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 20:48:49 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 1.1ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-21 21:03:59 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20251121210146_add_loyalty_tier_to_user_properties.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (8.0.3) lib/active_record/migration.rb:666:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-21 21:06:09 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20251121210146_add_loyalty_tier_to_user_properties.rb


):
  
activerecord (8.0.3) lib/active_record/migration.rb:742:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (8.0.3) lib/active_record/migration.rb:659:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (8.0.3) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (8.0.3) lib/active_record/migration.rb:664:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'Thread::Mutex#synchronize'
activerecord (8.0.3) lib/active_record/migration.rb:656:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.0.3) lib/active_support/callbacks.rb:100:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.0.3) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.0.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.0.3) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.0.3) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in 'Sprockets::Rails::QuietAssets#call'
actionpack (8.0.3) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (8.0.3) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.3) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (8.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.0.3) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.0.3) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (8.0.3) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.3) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.0.3) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (8.0.3) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (2.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddLoyaltyTierToUserProperties (20251121210146)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[35mALTER TABLE "user_properties" ADD "loyalty_tier" integer DEFAULT 0 NOT NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251121210146') RETURNING "version"[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3408675332363174475)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-11-21 21:08:20 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "stevenking86@gmail.com", "password" => "Password123!", "auth" => {"email" => "stevenking86@gmail.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "stevenking86@gmail.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 67ms (Views: 0.2ms | ActiveRecord: 22.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:08:20 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (2.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 61ms (Views: 0.2ms | ActiveRecord: 20.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:08:20 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 2.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-11-21 21:08:23 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (32.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (1.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
Completed 500 Internal Server Error in 56ms (ActiveRecord: 36.9ms (3 queries, 0 cached) | GC: 0.0ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/models/user_property.rb:5:in '<class:UserProperty>'
app/models/user_property.rb:1:in '<top (required)>'
app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
app/services/loyalty_tier_service.rb:69:in 'LoyaltyTierService#next_tier_info'
app/controllers/api/v1/loyalty_controller.rb:8:in 'Api::V1::LoyaltyController#index'
Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-11-21 21:08:23 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.0ms (3 queries, 0 cached) | GC: 0.0ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/models/user_property.rb:5:in '<class:UserProperty>'
app/models/user_property.rb:1:in '<top (required)>'
app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
app/services/loyalty_tier_service.rb:69:in 'LoyaltyTierService#next_tier_info'
app/controllers/api/v1/loyalty_controller.rb:8:in 'Api::V1::LoyaltyController#index'
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:10:33 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 56ms (Views: 0.3ms | ActiveRecord: 23.9ms (5 queries, 0 cached) | GC: 5.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:10:33 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-21 21:10:35 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:10:35 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (2.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 3.5ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-11-21 21:10:37 +0000
Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-11-21 21:10:37 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
Processing by Api::V1::LoyaltyController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  Parameters: {"loyalty" => {}}
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (1.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUserProperty Load (2.9ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mLease Load (6.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (0.7ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (3.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 48ms (Views: 0.1ms | ActiveRecord: 17.2ms (8 queries, 3 cached) | GC: 1.8ms)


  [1m[36mPayment Load (7.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 53ms (Views: 0.1ms | ActiveRecord: 54.0ms (8 queries, 3 cached) | GC: 1.8ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mPayment Load (1.9ms)[0m  [1m[34mSELECT "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Update (4.1ms)[0m  [1m[33mUPDATE "payments" SET "paid_date" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["paid_date", "2025-11-03"], ["updated_at", "2025-11-21 21:11:21.444009"], ["id", 2]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-11-21 21:11:23 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-11-21 21:11:23 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 2.7ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:12:16 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (2.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 33ms (Views: 0.5ms | ActiveRecord: 5.8ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:12:16 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 2.1ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-21 21:12:18 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (1.5ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-21"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (2.5ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 62ms (Views: 0.3ms | ActiveRecord: 18.9ms (30 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/units" for 127.0.0.1 at 2025-11-21 21:12:18 +0000
Processing by Api::V1::UnitsController#index as */*
  Parameters: {"unit" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mUnit Load (0.5ms)[0m  [1m[34mSELECT DISTINCT "units".* FROM "units" LEFT OUTER JOIN "leases" ON "leases"."unit_id" = "units"."id" WHERE (leases.id IS NULL OR leases.move_out_date <= $1)[0m  [[nil, "2025-11-21"]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" IN ($1, $2, $3, $4)[0m  [["id", 8], ["id", 9], ["id", 7], ["id", 10]]
  â†³ app/controllers/api/v1/units_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 19], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 21], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 17], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 24], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 22], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 23], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 18], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 25], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
  [1m[36mLease Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:13:in 'Unit#available?'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1 AND (move_out_date IS NULL OR move_out_date > $2) ORDER BY "leases"."id" ASC LIMIT $3[0m  [["unit_id", 16], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/models/unit.rb:18:in 'Unit#current_lease'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
  â†³ app/controllers/api/v1/units_controller.rb:35:in 'Enumerable#map'
Completed 200 OK in 87ms (Views: 0.2ms | ActiveRecord: 9.1ms (30 queries, 0 cached) | GC: 32.7ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:12:22 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.8ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:12:22 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-21 21:12:55 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 24ms (Views: 0.4ms | ActiveRecord: 6.4ms (5 queries, 0 cached) | GC: 0.9ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-11-21 21:12:55 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.8ms (5 queries, 0 cached) | GC: 0.8ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-21 21:12:55 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (5.4ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 18], ["lease_id", 1], ["amount", "1000.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-11-21 21:12:55.769766"], ["updated_at", "2025-11-21 21:12:55.769766"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 77ms (Views: 0.1ms | ActiveRecord: 18.5ms (41 queries, 10 cached) | GC: 4.4ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-11-21 21:12:55 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-11-21"], [nil, "2025-11-21"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 5.2ms (41 queries, 10 cached) | GC: 2.6ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:13:12 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 24ms (Views: 2.7ms | ActiveRecord: 2.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-11-21 21:13:12 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-12-01 16:39:20 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:45:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 93ms (Views: 0.7ms | ActiveRecord: 43.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:20 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (6.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (3.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (17.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 72ms (Views: 1.4ms | ActiveRecord: 29.2ms (5 queries, 0 cached) | GC: 3.9ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:20 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 16:39:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (4.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.5ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 16:39:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 16:39:23 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (3.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (1.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (2.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 51ms (Views: 0.1ms | ActiveRecord: 14.8ms (41 queries, 10 cached) | GC: 0.9ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 16:39:23 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 4.3ms (41 queries, 10 cached) | GC: 3.7ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:27 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:27 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-12-01 16:39:29 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.8ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-12-01 16:39:29 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 18], ["id", 8]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 1.9ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:37 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 16:39:37 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 16:43:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 16:43:23 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 16:43:23 +0000
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 3.4ms (41 queries, 10 cached) | GC: 4.5ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 16:43:23 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 18], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 1], ["user_id", 18], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 18], ["property_id", 8], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 21ms (Views: 0.1ms | ActiveRecord: 3.6ms (41 queries, 10 cached) | GC: 0.8ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (2.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mVerification Load (2.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mPayment Load (2.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mLeaseTenant Load (1.3ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mUserProperty Load (1.9ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mMaintenanceRequest Load (3.1ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mMaintenanceRequest Update All (2.4ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 15]]
  [1m[36mUser Destroy (3.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 15]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mMaintenanceRequest Update All (0.2ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 16]]
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 16]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mMaintenanceRequest Update All (0.2ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 17]]
  [1m[36mUser Destroy (1.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 17]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mVerification Load (1.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."rental_application_id" = $1 LIMIT $2[0m  [["rental_application_id", 2], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (2.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "Verification"], ["name", "id_image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 12]]
  [1m[36mVerification Destroy (0.3ms)[0m  [1m[31mDELETE FROM "verifications" WHERE "verifications"."id" = $1[0m  [["id", 2]]
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1 LIMIT $2[0m  [["rental_application_id", 2], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1[0m  [["lease_id", 1]]
  [1m[36mPayment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "payments" WHERE "payments"."id" = $1[0m  [["id", 1]]
  [1m[36mPayment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "payments" WHERE "payments"."id" = $1[0m  [["id", 2]]
  [1m[36mPayment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "payments" WHERE "payments"."id" = $1[0m  [["id", 3]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."lease_id" = $1[0m  [["lease_id", 1]]
  [1m[36mLeaseTenant Destroy (0.1ms)[0m  [1m[31mDELETE FROM "lease_tenants" WHERE "lease_tenants"."id" = $1[0m  [["id", 1]]
  [1m[36mLease Destroy (0.4ms)[0m  [1m[31mDELETE FROM "leases" WHERE "leases"."id" = $1[0m  [["id", 1]]
  [1m[36mRentalApplication Destroy (0.7ms)[0m  [1m[31mDELETE FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3[0m  [["record_id", 1], ["record_type", "MaintenanceRequest"], ["name", "photos"]]
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 13]]
  [1m[36mMaintenanceRequest Destroy (0.2ms)[0m  [1m[31mDELETE FROM "maintenance_requests" WHERE "maintenance_requests"."id" = $1[0m  [["id", 1]]
  [1m[36mMaintenanceRequest Update All (0.2ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 18]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: dd1b421e-efca-4dd9-8b5b-02706e28402b) to Async(default) with arguments: #<GlobalID:0x0000000129c3ba20 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 344e0f24-de0f-40ab-a565-8b963b8409ca) to Async(default) with arguments: #<GlobalID:0x0000000129c35d28 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 19]]
  [1m[36mMaintenanceRequest Update All (0.3ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 19]]
  [1m[36mUser Destroy (2.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 19]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (0.9ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mVerification Load (0.2ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mLeaseTenant Load (0.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mUserProperty Load (0.6ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mUserProperty Destroy (0.4ms)[0m  [1m[31mDELETE FROM "user_properties" WHERE "user_properties"."id" = $1[0m  [["id", 1]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 20]]
  [1m[36mMaintenanceRequest Update All (0.2ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 20]]
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 20]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mActiveStorage::Blob Load (17.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca] Performing ActiveStorage::PurgeJob (Job ID: 344e0f24-de0f-40ab-a565-8b963b8409ca) from Async(default) enqueued at 2025-12-01T16:58:56.169661000Z with arguments: #<GlobalID:0x000000012a375728 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mActiveStorage::Blob Load (18.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b] Performing ActiveStorage::PurgeJob (Job ID: dd1b421e-efca-4dd9-8b5b-02706e28402b) from Async(default) enqueued at 2025-12-01T16:58:56.168170000Z with arguments: #<GlobalID:0x000000012a43fd70 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mActiveStorage::Attachment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mActiveStorage::Attachment Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 12], ["LIMIT", 1]]
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 16]]
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 16]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mActiveStorage::VariantRecord Load (1.3ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 12]]
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mActiveStorage::VariantRecord Load (1.5ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 13]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 12], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mActiveStorage::Attachment Load (1.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 13], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mActiveStorage::Blob Destroy (1.1ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 12]]
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mActiveStorage::Blob Destroy (0.6ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 13]]
  [1m[36mUnitMonthlyPrice Load (1.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 16]]
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca]   [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b] [36m  Disk Storage (0.5ms) [0m[31mDeleted file from key: nqqetp8rufxs9gqa1ydb73j833hr[0m
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b] [36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/nqqetp8rufxs9gqa1ydb73j833hr/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [dd1b421e-efca-4dd9-8b5b-02706e28402b] Performed ActiveStorage::PurgeJob (Job ID: dd1b421e-efca-4dd9-8b5b-02706e28402b) from Async(default) in 46.81ms
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca] [36m  Disk Storage (0.2ms) [0m[31mDeleted file from key: pb5lp7193aoltwqbl497ss3gtrdg[0m
  [1m[36mRentalApplication Load (1.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca] [36m  Disk Storage (0.9ms) [0m[31mDeleted files by key prefix: variants/pb5lp7193aoltwqbl497ss3gtrdg/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [344e0f24-de0f-40ab-a565-8b963b8409ca] Performed ActiveStorage::PurgeJob (Job ID: 344e0f24-de0f-40ab-a565-8b963b8409ca) from Async(default) in 45.97ms
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 1]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 2]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 2]]
  [1m[36mRentalApplication Load (2.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 3]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 3]]
  [1m[36mUnit Destroy (1.0ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 16]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 17]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 17]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 17]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 4]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 4]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 5]]
  [1m[36mUnitMonthlyPrice Destroy (0.6ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 5]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 6]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 6]]
  [1m[36mUnit Destroy (0.9ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 17]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 18]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 18]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 18]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 7]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 7]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 8]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 8]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 9]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 9]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 18]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 7]]
  [1m[36mProperty Destroy (1.4ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 8]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 19]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 19]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 19]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 10]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 10]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 11]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 11]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 12]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 12]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 19]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 20]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 20]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 20]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 13]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 13]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 14]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 14]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 15]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 15]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 20]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 8]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 8]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 8]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 8]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 8]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 9]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 21]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 21]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 21]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 16]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 16]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 17]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 17]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 18]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 18]]
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 21]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 22]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 22]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 22]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 19]]
  [1m[36mUnitMonthlyPrice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 19]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 20]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 20]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 21]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 21]]
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 22]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 23]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 23]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 23]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 22]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 22]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 23]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 23]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 24]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 24]]
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 23]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 9]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 9]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 9]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 9]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 9]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 10]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 24]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 24]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 24]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 25]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 25]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 26]]
  [1m[36mUnitMonthlyPrice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 26]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 27]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 27]]
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 24]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 25]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 25]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 25]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 28]]
  [1m[36mUnitMonthlyPrice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 28]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 29]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 29]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 30]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 30]]
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 25]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 10]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 10]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 10]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 10]]
  [1m[36mProperty Destroy (1.0ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 10]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (2.1ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-12-01 16:58:56.384661"], ["updated_at", "2025-12-01 16:58:56.384661"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 11], ["name", "101"], ["created_at", "2025-12-01 16:58:56.388251"], ["updated_at", "2025-12-01 16:58:56.388251"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 11], ["name", "102"], ["created_at", "2025-12-01 16:58:56.390509"], ["updated_at", "2025-12-01 16:58:56.390509"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 11], ["name", "201"], ["created_at", "2025-12-01 16:58:56.392691"], ["updated_at", "2025-12-01 16:58:56.392691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 11], ["name", "202"], ["created_at", "2025-12-01 16:58:56.395143"], ["updated_at", "2025-12-01 16:58:56.395143"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 26], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.9ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 26], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 16:58:56.399351"], ["updated_at", "2025-12-01 16:58:56.399351"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 27], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 27], ["term", "12 months"], ["price", "1250.0"], ["created_at", "2025-12-01 16:58:56.402949"], ["updated_at", "2025-12-01 16:58:56.402949"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 28], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 28], ["term", "12 months"], ["price", "1300.0"], ["created_at", "2025-12-01 16:58:56.405891"], ["updated_at", "2025-12-01 16:58:56.405891"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 29], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 29], ["term", "12 months"], ["price", "1350.0"], ["created_at", "2025-12-01 16:58:56.409116"], ["updated_at", "2025-12-01 16:58:56.409116"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.8ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-12-01 16:58:56.410636"], ["updated_at", "2025-12-01 16:58:56.410636"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.0ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 12], ["name", "A1"], ["created_at", "2025-12-01 16:58:56.412617"], ["updated_at", "2025-12-01 16:58:56.412617"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 12], ["name", "A2"], ["created_at", "2025-12-01 16:58:56.414778"], ["updated_at", "2025-12-01 16:58:56.414778"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 12], ["name", "B1"], ["created_at", "2025-12-01 16:58:56.416685"], ["updated_at", "2025-12-01 16:58:56.416685"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 30], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 30], ["term", "12 months"], ["price", "1100.0"], ["created_at", "2025-12-01 16:58:56.420259"], ["updated_at", "2025-12-01 16:58:56.420259"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 31], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 31], ["term", "12 months"], ["price", "1150.0"], ["created_at", "2025-12-01 16:58:56.423276"], ["updated_at", "2025-12-01 16:58:56.423276"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 32], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 32], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 16:58:56.426104"], ["updated_at", "2025-12-01 16:58:56.426104"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pre_movein_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pre_movein_user@example.com"], ["created_at", "2025-12-01 16:58:56.670680"], ["updated_at", "2025-12-01 16:58:56.670680"], ["password_digest", "$2a$12$TCZCM5R6bvJqIXmXyJRELOsZU4Us77uEgB5JzLZy.MHVDnJVoWzOm"], ["role", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (2.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mVerification Load (1.5ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mPayment Load (2.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mLeaseTenant Load (1.4ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mUserProperty Load (1.8ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mMaintenanceRequest Load (2.4ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 21]]
  [1m[36mMaintenanceRequest Update All (0.5ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 21]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 21]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Load (1.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 26]]
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 26]]
  [1m[36mUnitMonthlyPrice Load (0.6ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 26]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 31]]
  [1m[36mUnitMonthlyPrice Destroy (0.6ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 31]]
  [1m[36mUnit Destroy (1.0ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 26]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 27]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 27]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 27]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 32]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 32]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 27]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 28]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 28]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 28]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 33]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 33]]
  [1m[36mUnit Destroy (0.4ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 28]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 29]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 29]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 29]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 34]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 34]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 29]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 11]]
  [1m[36mProperty Destroy (0.7ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 11]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 30]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 30]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 30]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 35]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 35]]
  [1m[36mUnit Destroy (0.6ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 30]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 31]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 31]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 31]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 36]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 36]]
  [1m[36mUnit Destroy (0.5ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 31]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 32]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 32]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 32]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 37]]
  [1m[36mUnitMonthlyPrice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 37]]
  [1m[36mUnit Destroy (0.2ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 32]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 12]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 12]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-12-01 17:01:53.783662"], ["updated_at", "2025-12-01 17:01:53.783662"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.0ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 13], ["name", "101"], ["created_at", "2025-12-01 17:01:53.786292"], ["updated_at", "2025-12-01 17:01:53.786292"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 13], ["name", "102"], ["created_at", "2025-12-01 17:01:53.788571"], ["updated_at", "2025-12-01 17:01:53.788571"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 13], ["name", "201"], ["created_at", "2025-12-01 17:01:53.790617"], ["updated_at", "2025-12-01 17:01:53.790617"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 13], ["name", "202"], ["created_at", "2025-12-01 17:01:53.792630"], ["updated_at", "2025-12-01 17:01:53.792630"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 33], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 33], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:01:53.796636"], ["updated_at", "2025-12-01 17:01:53.796636"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 34], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 34], ["term", "12 months"], ["price", "1250.0"], ["created_at", "2025-12-01 17:01:53.800175"], ["updated_at", "2025-12-01 17:01:53.800175"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 35], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 35], ["term", "12 months"], ["price", "1300.0"], ["created_at", "2025-12-01 17:01:53.803268"], ["updated_at", "2025-12-01 17:01:53.803268"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 36], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 36], ["term", "12 months"], ["price", "1350.0"], ["created_at", "2025-12-01 17:01:53.806534"], ["updated_at", "2025-12-01 17:01:53.806534"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-12-01 17:01:53.808191"], ["updated_at", "2025-12-01 17:01:53.808191"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 14], ["name", "A1"], ["created_at", "2025-12-01 17:01:53.810698"], ["updated_at", "2025-12-01 17:01:53.810698"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 14], ["name", "A2"], ["created_at", "2025-12-01 17:01:53.813024"], ["updated_at", "2025-12-01 17:01:53.813024"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 14], ["name", "B1"], ["created_at", "2025-12-01 17:01:53.814898"], ["updated_at", "2025-12-01 17:01:53.814898"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 37], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 37], ["term", "12 months"], ["price", "1100.0"], ["created_at", "2025-12-01 17:01:53.818297"], ["updated_at", "2025-12-01 17:01:53.818297"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 38], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 38], ["term", "12 months"], ["price", "1150.0"], ["created_at", "2025-12-01 17:01:53.821383"], ["updated_at", "2025-12-01 17:01:53.821383"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 39], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 39], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:01:53.824229"], ["updated_at", "2025-12-01 17:01:53.824229"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pre_movein_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pre_movein_user@example.com"], ["created_at", "2025-12-01 17:01:54.068331"], ["updated_at", "2025-12-01 17:01:54.068331"], ["password_digest", "$2a$12$pSSP9uVx3/zeoEFdbmi1Iue0gkHWlSybL.HcSRdo4u2mTsGRFZ65i"], ["role", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mVerification Load (1.0ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mLeaseTenant Load (1.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mUserProperty Load (1.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mMaintenanceRequest Load (1.7ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mMaintenanceRequest Update All (0.4ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 22]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 22]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Load (0.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 33]]
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 33]]
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 33]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 38]]
  [1m[36mUnitMonthlyPrice Destroy (0.5ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 38]]
  [1m[36mUnit Destroy (1.2ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 33]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 34]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 34]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 34]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 39]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 39]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 34]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 35]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 35]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 35]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 40]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 40]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 35]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 36]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 36]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 36]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 41]]
  [1m[36mUnitMonthlyPrice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 41]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 36]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mMaintenanceRequest Load (0.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 13]]
  [1m[36mProperty Destroy (1.3ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 13]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 37]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 37]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 37]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 42]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 42]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 37]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 38]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 38]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 38]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 43]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 43]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 38]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 39]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 39]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 39]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 44]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 44]]
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 39]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 14]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 14]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (1.1ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-12-01 17:03:05.882292"], ["updated_at", "2025-12-01 17:03:05.882292"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 15], ["name", "101"], ["created_at", "2025-12-01 17:03:05.885094"], ["updated_at", "2025-12-01 17:03:05.885094"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 15], ["name", "102"], ["created_at", "2025-12-01 17:03:05.887434"], ["updated_at", "2025-12-01 17:03:05.887434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 15], ["name", "201"], ["created_at", "2025-12-01 17:03:05.889766"], ["updated_at", "2025-12-01 17:03:05.889766"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 15], ["name", "202"], ["created_at", "2025-12-01 17:03:05.891911"], ["updated_at", "2025-12-01 17:03:05.891911"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 40], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 40], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:03:05.896102"], ["updated_at", "2025-12-01 17:03:05.896102"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 41], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 41], ["term", "12 months"], ["price", "1250.0"], ["created_at", "2025-12-01 17:03:05.899436"], ["updated_at", "2025-12-01 17:03:05.899436"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 42], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 42], ["term", "12 months"], ["price", "1300.0"], ["created_at", "2025-12-01 17:03:05.902575"], ["updated_at", "2025-12-01 17:03:05.902575"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 43], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 43], ["term", "12 months"], ["price", "1350.0"], ["created_at", "2025-12-01 17:03:05.905699"], ["updated_at", "2025-12-01 17:03:05.905699"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-12-01 17:03:05.907406"], ["updated_at", "2025-12-01 17:03:05.907406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 16], ["name", "A1"], ["created_at", "2025-12-01 17:03:05.910066"], ["updated_at", "2025-12-01 17:03:05.910066"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 16], ["name", "A2"], ["created_at", "2025-12-01 17:03:05.912389"], ["updated_at", "2025-12-01 17:03:05.912389"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 16], ["name", "B1"], ["created_at", "2025-12-01 17:03:05.914295"], ["updated_at", "2025-12-01 17:03:05.914295"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 44], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 44], ["term", "12 months"], ["price", "1100.0"], ["created_at", "2025-12-01 17:03:05.917903"], ["updated_at", "2025-12-01 17:03:05.917903"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 45], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 45], ["term", "12 months"], ["price", "1150.0"], ["created_at", "2025-12-01 17:03:05.921171"], ["updated_at", "2025-12-01 17:03:05.921171"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 46], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 46], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:03:05.924215"], ["updated_at", "2025-12-01 17:03:05.924215"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pre_movein_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pre_movein_user@example.com"], ["created_at", "2025-12-01 17:03:06.165371"], ["updated_at", "2025-12-01 17:03:06.165371"], ["password_digest", "$2a$12$OjXMaErgU3jFoe9/HRJaEOPQ8NXa8/sT/Ua0u1oyIX07A0Uzq.GWe"], ["role", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Load (2.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mVerification Load (1.6ms)[0m  [1m[34mSELECT "verifications".* FROM "verifications" WHERE "verifications"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mPayment Load (2.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mLeaseTenant Load (1.2ms)[0m  [1m[34mSELECT "lease_tenants".* FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mUserProperty Load (1.7ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mMaintenanceRequest Load (2.3ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mMaintenanceRequest Update All (0.5ms)[0m  [1m[33mUPDATE "maintenance_requests" SET "assigned_maintenance_user_id" = $1 WHERE "maintenance_requests"."assigned_maintenance_user_id" = $2[0m  [["assigned_maintenance_user_id", nil], ["assigned_maintenance_user_id", 23]]
  [1m[36mUser Destroy (2.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 23]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (1.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 40]]
  [1m[36mLease Load (1.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 40]]
  [1m[36mUnitMonthlyPrice Load (1.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 40]]
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 45]]
  [1m[36mUnitMonthlyPrice Destroy (0.5ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 45]]
  [1m[36mUnit Destroy (1.2ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 40]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 41]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 41]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 41]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 46]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 46]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 41]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 42]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 42]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 42]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 47]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 47]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 42]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 43]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 43]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 43]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 48]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 48]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 43]]
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mMaintenanceRequest Load (0.4ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 15]]
  [1m[36mProperty Destroy (1.5ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 15]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Load (1.0ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 44]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 44]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 44]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 49]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 49]]
  [1m[36mUnit Destroy (0.7ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 44]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 45]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 45]]
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 45]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 50]]
  [1m[36mUnitMonthlyPrice Destroy (0.4ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 50]]
  [1m[36mUnit Destroy (0.8ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 45]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_id" = $1[0m  [["unit_id", 46]]
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."unit_id" = $1[0m  [["unit_id", 46]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1[0m  [["unit_id", 46]]
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."unit_monthly_price_id" = $1[0m  [["unit_monthly_price_id", 51]]
  [1m[36mUnitMonthlyPrice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1[0m  [["id", 51]]
  [1m[36mUnit Destroy (0.3ms)[0m  [1m[31mDELETE FROM "units" WHERE "units"."id" = $1[0m  [["id", 46]]
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mMaintenanceRequest Load (0.2ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."property_id" = $1[0m  [["property_id", 16]]
  [1m[36mProperty Destroy (0.9ms)[0m  [1m[31mDELETE FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 16]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-12-01 17:05:17.643865"], ["updated_at", "2025-12-01 17:05:17.643865"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.1ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 17], ["name", "101"], ["created_at", "2025-12-01 17:05:17.646707"], ["updated_at", "2025-12-01 17:05:17.646707"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 17], ["name", "102"], ["created_at", "2025-12-01 17:05:17.649355"], ["updated_at", "2025-12-01 17:05:17.649355"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 17], ["name", "201"], ["created_at", "2025-12-01 17:05:17.651573"], ["updated_at", "2025-12-01 17:05:17.651573"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 17], ["name", "202"], ["created_at", "2025-12-01 17:05:17.653723"], ["updated_at", "2025-12-01 17:05:17.653723"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 47], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 47], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:05:17.658398"], ["updated_at", "2025-12-01 17:05:17.658398"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 48], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 48], ["term", "12 months"], ["price", "1250.0"], ["created_at", "2025-12-01 17:05:17.662010"], ["updated_at", "2025-12-01 17:05:17.662010"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 49], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 49], ["term", "12 months"], ["price", "1300.0"], ["created_at", "2025-12-01 17:05:17.665181"], ["updated_at", "2025-12-01 17:05:17.665181"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 50], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 50], ["term", "12 months"], ["price", "1350.0"], ["created_at", "2025-12-01 17:05:17.668260"], ["updated_at", "2025-12-01 17:05:17.668260"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-12-01 17:05:17.669813"], ["updated_at", "2025-12-01 17:05:17.669813"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 18], ["name", "A1"], ["created_at", "2025-12-01 17:05:17.672047"], ["updated_at", "2025-12-01 17:05:17.672047"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.9ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 18], ["name", "A2"], ["created_at", "2025-12-01 17:05:17.674117"], ["updated_at", "2025-12-01 17:05:17.674117"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 18], ["name", "B1"], ["created_at", "2025-12-01 17:05:17.676205"], ["updated_at", "2025-12-01 17:05:17.676205"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 51], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 51], ["term", "12 months"], ["price", "1100.0"], ["created_at", "2025-12-01 17:05:17.679951"], ["updated_at", "2025-12-01 17:05:17.679951"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 52], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 52], ["term", "12 months"], ["price", "1150.0"], ["created_at", "2025-12-01 17:05:17.683095"], ["updated_at", "2025-12-01 17:05:17.683095"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 53], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 53], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:05:17.686108"], ["updated_at", "2025-12-01 17:05:17.686108"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pre_movein_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pre_movein_user@example.com"], ["created_at", "2025-12-01 17:05:17.927768"], ["updated_at", "2025-12-01 17:05:17.927768"], ["password_digest", "$2a$12$GM7efjBau0ma4i.LpIwljedyG20s/900lTN4O5MQz5L7qHVZSeiZ6"], ["role", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (2.0ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 24], ["property_id", 17], ["unit_id", 47], ["move_in_date", "2025-01-15"], ["status", 1], ["created_at", "2025-12-01 17:05:17.932792"], ["updated_at", "2025-12-01 17:05:17.932792"], ["unit_monthly_price_id", 52], ["first_name", "Alex"], ["last_name", "Johnson"], ["date_of_birth", "1990-05-15"], ["gender", "Non-binary"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.5ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 3], ["property_id", 17], ["unit_id", 47], ["signed", true], ["signed_date", "2024-11-20"], ["move_in_date", "2025-01-15"], ["move_out_date", nil], ["created_at", "2025-12-01 17:05:17.939158"], ["updated_at", "2025-12-01 17:05:17.939158"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 24], ["lease_id", 2], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.6ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 2], ["user_id", 24], ["created_at", "2025-12-01 17:05:17.944552"], ["updated_at", "2025-12-01 17:05:17.944552"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "moved_in_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "moved_in_user@example.com"], ["created_at", "2025-12-01 17:05:18.185640"], ["updated_at", "2025-12-01 17:05:18.185640"], ["password_digest", "$2a$12$4qdyikdXqU/Pkp1RGvp5RuvofhxqRavxwxj6oDicmv0op8GE1zJA2"], ["role", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.3ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 25], ["property_id", 17], ["unit_id", 48], ["move_in_date", "2024-11-01"], ["status", 1], ["created_at", "2025-12-01 17:05:18.188036"], ["updated_at", "2025-12-01 17:05:18.188036"], ["unit_monthly_price_id", 53], ["first_name", "Sarah"], ["last_name", "Williams"], ["date_of_birth", "1988-08-22"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.1ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 4], ["property_id", 17], ["unit_id", 48], ["signed", true], ["signed_date", "2024-10-15"], ["move_in_date", "2024-11-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:05:18.190918"], ["updated_at", "2025-12-01 17:05:18.190918"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 25], ["lease_id", 3], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.4ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 3], ["user_id", 25], ["created_at", "2025-12-01 17:05:18.198071"], ["updated_at", "2025-12-01 17:05:18.198071"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 25], ["property_id", 17], ["created_at", "2025-12-01 17:05:18.208922"], ["updated_at", "2025-12-01 17:05:18.208922"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.5ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2024-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:05:18.226051"], ["updated_at", "2025-12-01 17:05:18.226051"], ["payment_month", "2024-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "loyalty_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "loyalty_user@example.com"], ["created_at", "2025-12-01 17:05:18.468173"], ["updated_at", "2025-12-01 17:05:18.468173"], ["password_digest", "$2a$12$3SNG3gK0EltRRch71gq8iu4G3XQZxGtqjf0/SF00LaKHvW3Vyw5ye"], ["role", nil]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.2ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 26], ["property_id", 17], ["unit_id", 49], ["move_in_date", "2024-05-01"], ["status", 1], ["created_at", "2025-12-01 17:05:18.471131"], ["updated_at", "2025-12-01 17:05:18.471131"], ["unit_monthly_price_id", 54], ["first_name", "Michael"], ["last_name", "Chen"], ["date_of_birth", "1992-03-10"], ["gender", "Male"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.1ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 5], ["property_id", 17], ["unit_id", 49], ["signed", true], ["signed_date", "2024-04-20"], ["move_in_date", "2024-05-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:05:18.473649"], ["updated_at", "2025-12-01 17:05:18.473649"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 26], ["lease_id", 4], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.6ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 4], ["user_id", 26], ["created_at", "2025-12-01 17:05:18.477791"], ["updated_at", "2025-12-01 17:05:18.477791"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 26], ["property_id", 17], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 26], ["property_id", 17], ["created_at", "2025-12-01 17:05:18.480950"], ["updated_at", "2025-12-01 17:05:18.480950"], ["loyalty_tier", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-06-01"], ["paid_date", "2024-06-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.482571"], ["updated_at", "2025-12-01 17:05:18.482571"], ["payment_month", "2024-06-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-07-01"], ["paid_date", "2024-07-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.485207"], ["updated_at", "2025-12-01 17:05:18.485207"], ["payment_month", "2024-07-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-08-01"], ["paid_date", "2024-08-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.487365"], ["updated_at", "2025-12-01 17:05:18.487365"], ["payment_month", "2024-08-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-09-01"], ["paid_date", "2024-09-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.489936"], ["updated_at", "2025-12-01 17:05:18.489936"], ["payment_month", "2024-09-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-10-01"], ["paid_date", "2024-10-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.492068"], ["updated_at", "2025-12-01 17:05:18.492068"], ["payment_month", "2024-10-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.3ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-11-01"], ["paid_date", "2024-11-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.494210"], ["updated_at", "2025-12-01 17:05:18.494210"], ["payment_month", "2024-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 26], ["lease_id", 4], ["amount", "1300.0"], ["due_date", "2024-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:05:18.496726"], ["updated_at", "2025-12-01 17:05:18.496726"], ["payment_month", "2024-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dual_lease_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "dual_lease_user@example.com"], ["created_at", "2025-12-01 17:05:18.737878"], ["updated_at", "2025-12-01 17:05:18.737878"], ["password_digest", "$2a$12$ftH7yW9DUXEdgshNsLdhE.JDWlQk9tL7EDJHHXdU7SW9KLkVGJUB2"], ["role", nil]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.3ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 27], ["property_id", 17], ["unit_id", 50], ["move_in_date", "2024-09-01"], ["status", 1], ["created_at", "2025-12-01 17:05:18.740407"], ["updated_at", "2025-12-01 17:05:18.740407"], ["unit_monthly_price_id", 55], ["first_name", "Emily"], ["last_name", "Rodriguez"], ["date_of_birth", "1995-11-30"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.2ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 6], ["property_id", 17], ["unit_id", 50], ["signed", true], ["signed_date", "2024-08-25"], ["move_in_date", "2024-09-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:05:18.743002"], ["updated_at", "2025-12-01 17:05:18.743002"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 27], ["lease_id", 5], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.4ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 5], ["user_id", 27], ["created_at", "2025-12-01 17:05:18.747210"], ["updated_at", "2025-12-01 17:05:18.747210"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.1ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 27], ["property_id", 18], ["unit_id", 51], ["move_in_date", "2024-10-15"], ["status", 1], ["created_at", "2025-12-01 17:05:18.748799"], ["updated_at", "2025-12-01 17:05:18.748799"], ["unit_monthly_price_id", 56], ["first_name", "Emily"], ["last_name", "Rodriguez"], ["date_of_birth", "1995-11-30"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.3ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 7], ["property_id", 18], ["unit_id", 51], ["signed", true], ["signed_date", "2024-10-01"], ["move_in_date", "2024-10-15"], ["move_out_date", nil], ["created_at", "2025-12-01 17:05:18.751397"], ["updated_at", "2025-12-01 17:05:18.751397"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 27], ["lease_id", 6], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.4ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 6], ["user_id", 27], ["created_at", "2025-12-01 17:05:18.755337"], ["updated_at", "2025-12-01 17:05:18.755337"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 27], ["property_id", 17], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 27], ["property_id", 17], ["created_at", "2025-12-01 17:05:18.758577"], ["updated_at", "2025-12-01 17:05:18.758577"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 27], ["property_id", 18], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 27], ["property_id", 18], ["created_at", "2025-12-01 17:05:18.761412"], ["updated_at", "2025-12-01 17:05:18.761412"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 27], ["lease_id", 5], ["amount", "1350.0"], ["due_date", "2024-10-01"], ["paid_date", "2024-10-05"], ["status", 1], ["created_at", "2025-12-01 17:05:18.763334"], ["updated_at", "2025-12-01 17:05:18.763334"], ["payment_month", "2024-10-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 27], ["lease_id", 5], ["amount", "1350.0"], ["due_date", "2024-11-01"], ["paid_date", "2024-11-03"], ["status", 1], ["created_at", "2025-12-01 17:05:18.765419"], ["updated_at", "2025-12-01 17:05:18.765419"], ["payment_month", "2024-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 27], ["lease_id", 5], ["amount", "1350.0"], ["due_date", "2024-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:05:18.767507"], ["updated_at", "2025-12-01 17:05:18.767507"], ["payment_month", "2024-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 27], ["lease_id", 6], ["amount", "1100.0"], ["due_date", "2024-11-01"], ["paid_date", "2024-11-08"], ["status", 1], ["created_at", "2025-12-01 17:05:18.769847"], ["updated_at", "2025-12-01 17:05:18.769847"], ["payment_month", "2024-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 27], ["lease_id", 6], ["amount", "1100.0"], ["due_date", "2024-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:05:18.771890"], ["updated_at", "2025-12-01 17:05:18.771890"], ["payment_month", "2024-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "maintenance@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "maintenance@demo.com"], ["created_at", "2025-12-01 17:05:19.013393"], ["updated_at", "2025-12-01 17:05:19.013393"], ["password_digest", "$2a$12$RXqpM1/N8LKDBuiS0xmAIeLs9uzB36jxKbB1iR3mNCI4dL1Dk4V4e"], ["role", "maintenance"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 28], ["property_id", 17], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 28], ["property_id", 17], ["created_at", "2025-12-01 17:05:19.016996"], ["updated_at", "2025-12-01 17:05:19.016996"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "admin@demo.com"], ["created_at", "2025-12-01 17:05:19.256949"], ["updated_at", "2025-12-01 17:05:19.256949"], ["password_digest", "$2a$12$U9Q1cmFwCSDAgqltxFZhcuOa0anCCcFMy7sfVq96FKlZpfdNzl.wK"], ["role", "property_admin"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 29], ["property_id", 17], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 29], ["property_id", 17], ["created_at", "2025-12-01 17:05:19.260573"], ["updated_at", "2025-12-01 17:05:19.260573"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "superadmin@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "superadmin@demo.com"], ["created_at", "2025-12-01 17:05:19.500778"], ["updated_at", "2025-12-01 17:05:19.500778"], ["password_digest", "$2a$12$A2Umny2Knt22lAFx6ZNOquALTy5r2laCz6S.Z/lnZ3eaVuGzKHD.G"], ["role", "super_admin"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUnit Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mRentalApplication Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rental_applications"[0m
  [1m[36mLease Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "leases"[0m
  [1m[36mPayment Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[36mUserProperty Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_properties"[0m
Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:10:54 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 6.9ms (1 query, 0 cached) | GC: 0.1ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:10:54 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-12-01 17:10:56 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:44:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-12-01 17:11:21 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "moved_in_user@example.com", "password" => "Password123!", "auth" => {"email" => "moved_in_user@example.com", "password" => "Password123!"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "moved_in_user@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 258ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:11:21 +0000
Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:11:21 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
Processing by Api::V1::RentalApplicationsController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  Parameters: {"rental_application" => {}}
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.7ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.8ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 4]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 5.5ms (5 queries, 0 cached) | GC: 2.0ms)


  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.0ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.7ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 4]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 45.4ms (5 queries, 0 cached) | GC: 2.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-12-01 17:11:30 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 25], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (1.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 25], ["id", 17]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 25], ["id", 17]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 28ms (Views: 0.1ms | ActiveRecord: 9.5ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/loyalty" for 127.0.0.1 at 2025-12-01 17:11:30 +0000
Processing by Api::V1::LoyaltyController#index as */*
  Parameters: {"loyalty" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 25], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:33:in 'Api::V1::LoyaltyController#set_active_lease'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/loyalty_controller.rb:7:in 'Api::V1::LoyaltyController#index'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 25], ["id", 17]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" INNER JOIN "leases" ON "leases"."id" = "payments"."lease_id" INNER JOIN "properties" ON "properties"."id" = "leases"."property_id" WHERE "payments"."user_id" = $1 AND "properties"."id" = $2[0m  [["user_id", 25], ["id", 17]]
  â†³ app/services/loyalty_tier_service.rb:63:in 'LoyaltyTierService#on_time_payments_count'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.4ms (8 queries, 3 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:11:32 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 4]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:11:32 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 4]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 17:11:33 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 4]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 17:11:33 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 25]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 48]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 4]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:11:33 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 25], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (1.2ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-01-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.265127"], ["updated_at", "2025-12-01 17:11:33.265127"], ["payment_month", "2025-01-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-02-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.268796"], ["updated_at", "2025-12-01 17:11:33.268796"], ["payment_month", "2025-02-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-03-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.270632"], ["updated_at", "2025-12-01 17:11:33.270632"], ["payment_month", "2025-03-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-04-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.272294"], ["updated_at", "2025-12-01 17:11:33.272294"], ["payment_month", "2025-04-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (1.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-05-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.274230"], ["updated_at", "2025-12-01 17:11:33.274230"], ["payment_month", "2025-05-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-06-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.277504"], ["updated_at", "2025-12-01 17:11:33.277504"], ["payment_month", "2025-06-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-07-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.279279"], ["updated_at", "2025-12-01 17:11:33.279279"], ["payment_month", "2025-07-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-08-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.281067"], ["updated_at", "2025-12-01 17:11:33.281067"], ["payment_month", "2025-08-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-09-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.283170"], ["updated_at", "2025-12-01 17:11:33.283170"], ["payment_month", "2025-09-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-10-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.284996"], ["updated_at", "2025-12-01 17:11:33.284996"], ["payment_month", "2025-10-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-11-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.286679"], ["updated_at", "2025-12-01 17:11:33.286679"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 25], ["lease_id", 3], ["amount", "1250.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:11:33.288245"], ["updated_at", "2025-12-01 17:11:33.288245"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:11:in 'block in Api::V1::PaymentsController#outstanding'
  [1m[36mUserProperty Load (0.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 171ms (Views: 0.2ms | ActiveRecord: 32.2ms (211 queries, 70 cached) | GC: 17.6ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:11:33 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 25], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2024-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-01-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-02-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-03-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-04-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-05-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-06-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-07-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-08-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-09-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-10-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-11-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 3], ["user_id", 25], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 25], ["property_id", 17], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 110ms (Views: 0.2ms | ActiveRecord: 16.0ms (211 queries, 70 cached) | GC: 8.1ms)


DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (7429.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "laft_development"[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[35m (19.2ms)[0m  [1m[34mSELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = 'laft_development' AND pid <> pg_backend_pid();[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
[dotenv] Set [36mOPENAI_API_KEY[0m, [36mSTRIPE_SECRET_KEY[0m, and [36mNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY[0m
[dotenv] Loaded [33m.env[0m
DEPRECATION WARNING: `to_time` will always preserve the full timezone rather than offset of the receiver in Rails 8.1. To opt in to the new behavior, set `config.active_support.to_time_preserves_timezone = :zone`. (called from <top (required)> at /Users/stevengerhardt-king/Code/laft/backend/config/environment.rb:5)
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (159.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "laft_development"[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (28.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "laft_test"[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (130.7ms)[0m  [1m[35mCREATE DATABASE "laft_development" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.3ms)[0m  [1m[35mCREATE DATABASE "laft_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "lease_tenants" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "lease_tenants" ("id" bigserial primary key, "lease_id" bigint NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_lease_tenants_on_lease_id_and_user_id" ON "lease_tenants" ("lease_id", "user_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_lease_id" ON "lease_tenants" ("lease_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_user_id" ON "lease_tenants" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "leases" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "leases" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "signed" boolean DEFAULT FALSE NOT NULL, "signed_date" date, "move_in_date" date NOT NULL, "move_out_date" date, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_leases_on_move_in_date" ON "leases" ("move_in_date")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_leases_on_property_id" ON "leases" ("property_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_leases_on_rental_application_id" ON "leases" ("rental_application_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_leases_on_unit_id" ON "leases" ("unit_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "maintenance_requests" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "maintenance_requests" ("id" bigserial primary key, "ticket_number" character varying NOT NULL, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint, "category" character varying NOT NULL, "description" text NOT NULL, "preferred_entry_time" text, "resident_must_be_home" boolean DEFAULT FALSE NOT NULL, "urgency_level" character varying NOT NULL, "status" character varying DEFAULT 'Submitted' NOT NULL, "assigned_maintenance_user_id" bigint, "admin_notes" text, "resident_visible_notes" text, "resolution_notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_assigned_maintenance_user_id" ON "maintenance_requests" ("assigned_maintenance_user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_property_id" ON "maintenance_requests" ("property_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_status" ON "maintenance_requests" ("status")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_maintenance_requests_on_ticket_number" ON "maintenance_requests" ("ticket_number")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_unit_id" ON "maintenance_requests" ("unit_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_urgency_level" ON "maintenance_requests" ("urgency_level")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_user_id" ON "maintenance_requests" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "lease_id" bigint NOT NULL, "amount" decimal(8,2) NOT NULL, "due_date" date NOT NULL, "paid_date" date, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "payment_month" date, "stripe_payment_intent_id" character varying, "stripe_charge_id" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_due_date" ON "payments" ("due_date")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_lease_id" ON "payments" ("lease_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_payment_month" ON "payments" ("payment_month")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_payments_on_status" ON "payments" ("status")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_user_id" ON "payments" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "name" character varying NOT NULL, "address" text NOT NULL, "office_hours" text, "pets_allowed" boolean DEFAULT FALSE NOT NULL, "has_parking" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rental_applications" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "rental_applications" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "move_in_date" date NOT NULL, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "unit_monthly_price_id" bigint NOT NULL, "first_name" character varying, "last_name" character varying, "date_of_birth" date, "gender" character varying, "middle_name" character varying)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_property_id" ON "rental_applications" ("property_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_status" ON "rental_applications" ("status")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_id" ON "rental_applications" ("unit_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_monthly_price_id" ON "rental_applications" ("unit_monthly_price_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_user_id" ON "rental_applications" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "unit_monthly_prices" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "unit_monthly_prices" ("id" bigserial primary key, "unit_id" bigint NOT NULL, "term" character varying NOT NULL, "price" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_unit_monthly_prices_on_unit_id_and_term" ON "unit_monthly_prices" ("unit_id", "term")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_unit_monthly_prices_on_unit_id" ON "unit_monthly_prices" ("unit_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "units" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "units" ("id" bigserial primary key, "property_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_units_on_property_id" ON "units" ("property_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_properties" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "user_properties" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "loyalty_tier" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_property_id" ON "user_properties" ("property_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_properties_on_user_id_and_property_id" ON "user_properties" ("user_id", "property_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_user_id" ON "user_properties" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "role" character varying)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "verifications" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "verifications" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "user_id" bigint NOT NULL, "is_verified" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "id_name_first" character varying, "id_name_last" character varying, "id_valid" boolean DEFAULT FALSE, "name_match" boolean DEFAULT FALSE, "verification_status" character varying DEFAULT 'pending', "ai_response" jsonb, "id_name_middle" character varying)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_rental_application_id" ON "verifications" ("rental_application_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_user_id" ON "verifications" ("user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "lease_tenants" ADD CONSTRAINT "fk_rails_df3043dbd4"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "lease_tenants" ADD CONSTRAINT "fk_rails_bb0cf78ab5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_170c7116c8"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_5e2c35a820"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_29210439a5"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_779301eeec"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_8c23f3be94"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_79e4eb887e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_d74a986933"
FOREIGN KEY ("assigned_maintenance_user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_b77711b98f"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_081dc04a02"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_3875d631ab"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_a589f39559"
FOREIGN KEY ("unit_monthly_price_id")
  REFERENCES "unit_monthly_prices" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_8e7d957e39"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_e257d0e090"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "unit_monthly_prices" ADD CONSTRAINT "fk_rails_a755434ecc"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "units" ADD CONSTRAINT "fk_rails_d7df365ccb"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "user_properties" ADD CONSTRAINT "fk_rails_50c0d69da9"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "user_properties" ADD CONSTRAINT "fk_rails_4924e05fff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "verifications" ADD CONSTRAINT "fk_rails_23e64a9325"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "verifications" ADD CONSTRAINT "fk_rails_f184078eb4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251121210146)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251120114257),
(20251120114159),
(20251120114101),
(20251119202501),
(20251112163404),
(20251112163324),
(20251112161920),
(20251112161915),
(20251112160343),
(20251112160327),
(20251017092002),
(20251017091748),
(20251015185838),
(20251015185821),
(20251015185806),
(20251015185751),
(20251015185728),
(20251015185716),
(20251015185703),
(20251015135948),
(20251014205711),
(1);[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-12-01 17:14:02.791133', '2025-12-01 17:14:02.791135') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '0d8c75718b6bc2ff0a8a1b9c85913157d8f50806', '2025-12-01 17:14:02.793028', '2025-12-01 17:14:02.793029') RETURNING "key"[0m
  [1m[35mSQL (6.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "lease_tenants" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "lease_tenants" ("id" bigserial primary key, "lease_id" bigint NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_lease_tenants_on_lease_id_and_user_id" ON "lease_tenants" ("lease_id", "user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_lease_id" ON "lease_tenants" ("lease_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_lease_tenants_on_user_id" ON "lease_tenants" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "leases" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "leases" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "signed" boolean DEFAULT FALSE NOT NULL, "signed_date" date, "move_in_date" date NOT NULL, "move_out_date" date, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_leases_on_move_in_date" ON "leases" ("move_in_date")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_leases_on_property_id" ON "leases" ("property_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_leases_on_rental_application_id" ON "leases" ("rental_application_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_leases_on_unit_id" ON "leases" ("unit_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "maintenance_requests" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "maintenance_requests" ("id" bigserial primary key, "ticket_number" character varying NOT NULL, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint, "category" character varying NOT NULL, "description" text NOT NULL, "preferred_entry_time" text, "resident_must_be_home" boolean DEFAULT FALSE NOT NULL, "urgency_level" character varying NOT NULL, "status" character varying DEFAULT 'Submitted' NOT NULL, "assigned_maintenance_user_id" bigint, "admin_notes" text, "resident_visible_notes" text, "resolution_notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_assigned_maintenance_user_id" ON "maintenance_requests" ("assigned_maintenance_user_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_property_id" ON "maintenance_requests" ("property_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_status" ON "maintenance_requests" ("status")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_maintenance_requests_on_ticket_number" ON "maintenance_requests" ("ticket_number")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_unit_id" ON "maintenance_requests" ("unit_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_urgency_level" ON "maintenance_requests" ("urgency_level")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_maintenance_requests_on_user_id" ON "maintenance_requests" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "lease_id" bigint NOT NULL, "amount" decimal(8,2) NOT NULL, "due_date" date NOT NULL, "paid_date" date, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "payment_month" date, "stripe_payment_intent_id" character varying, "stripe_charge_id" character varying)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_payments_on_due_date" ON "payments" ("due_date")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_lease_id" ON "payments" ("lease_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_payments_on_payment_month" ON "payments" ("payment_month")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_status" ON "payments" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_payments_on_user_id" ON "payments" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "properties" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "properties" ("id" bigserial primary key, "name" character varying NOT NULL, "address" text NOT NULL, "office_hours" text, "pets_allowed" boolean DEFAULT FALSE NOT NULL, "has_parking" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rental_applications" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "rental_applications" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "unit_id" bigint NOT NULL, "move_in_date" date NOT NULL, "status" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "unit_monthly_price_id" bigint NOT NULL, "first_name" character varying, "last_name" character varying, "date_of_birth" date, "gender" character varying, "middle_name" character varying)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_property_id" ON "rental_applications" ("property_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_status" ON "rental_applications" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_id" ON "rental_applications" ("unit_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_unit_monthly_price_id" ON "rental_applications" ("unit_monthly_price_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_rental_applications_on_user_id" ON "rental_applications" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "unit_monthly_prices" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "unit_monthly_prices" ("id" bigserial primary key, "unit_id" bigint NOT NULL, "term" character varying NOT NULL, "price" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_unit_monthly_prices_on_unit_id_and_term" ON "unit_monthly_prices" ("unit_id", "term")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_unit_monthly_prices_on_unit_id" ON "unit_monthly_prices" ("unit_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "units" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "units" ("id" bigserial primary key, "property_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_units_on_property_id" ON "units" ("property_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "user_properties" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "user_properties" ("id" bigserial primary key, "user_id" bigint NOT NULL, "property_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "loyalty_tier" integer DEFAULT 0 NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_property_id" ON "user_properties" ("property_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_properties_on_user_id_and_property_id" ON "user_properties" ("user_id", "property_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_user_properties_on_user_id" ON "user_properties" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "role" character varying)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "verifications" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "verifications" ("id" bigserial primary key, "rental_application_id" bigint NOT NULL, "user_id" bigint NOT NULL, "is_verified" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "id_name_first" character varying, "id_name_last" character varying, "id_valid" boolean DEFAULT FALSE, "name_match" boolean DEFAULT FALSE, "verification_status" character varying DEFAULT 'pending', "ai_response" jsonb, "id_name_middle" character varying)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_rental_application_id" ON "verifications" ("rental_application_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_verifications_on_user_id" ON "verifications" ("user_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "lease_tenants" ADD CONSTRAINT "fk_rails_df3043dbd4"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "lease_tenants" ADD CONSTRAINT "fk_rails_bb0cf78ab5"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_170c7116c8"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_5e2c35a820"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "leases" ADD CONSTRAINT "fk_rails_29210439a5"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_779301eeec"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_8c23f3be94"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_79e4eb887e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "maintenance_requests" ADD CONSTRAINT "fk_rails_d74a986933"
FOREIGN KEY ("assigned_maintenance_user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_b77711b98f"
FOREIGN KEY ("lease_id")
  REFERENCES "leases" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_081dc04a02"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_3875d631ab"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_a589f39559"
FOREIGN KEY ("unit_monthly_price_id")
  REFERENCES "unit_monthly_prices" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_8e7d957e39"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "rental_applications" ADD CONSTRAINT "fk_rails_e257d0e090"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "unit_monthly_prices" ADD CONSTRAINT "fk_rails_a755434ecc"
FOREIGN KEY ("unit_id")
  REFERENCES "units" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "units" ADD CONSTRAINT "fk_rails_d7df365ccb"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "user_properties" ADD CONSTRAINT "fk_rails_50c0d69da9"
FOREIGN KEY ("property_id")
  REFERENCES "properties" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "user_properties" ADD CONSTRAINT "fk_rails_4924e05fff"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "verifications" ADD CONSTRAINT "fk_rails_23e64a9325"
FOREIGN KEY ("rental_application_id")
  REFERENCES "rental_applications" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "verifications" ADD CONSTRAINT "fk_rails_f184078eb4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251121210146)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251120114257),
(20251120114159),
(20251120114101),
(20251119202501),
(20251112163404),
(20251112163324),
(20251112161920),
(20251112161915),
(20251112160343),
(20251112160327),
(20251017092002),
(20251017091748),
(20251015185838),
(20251015185821),
(20251015185806),
(20251015185751),
(20251015185728),
(20251015185716),
(20251015185703),
(20251015135948),
(20251014205711),
(1);[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-12-01 17:14:02.920961', '2025-12-01 17:14:02.920962') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2025-12-01 17:14:02.922290' WHERE "ar_internal_metadata"."key" = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '0d8c75718b6bc2ff0a8a1b9c85913157d8f50806', '2025-12-01 17:14:02.923696', '2025-12-01 17:14:02.923697') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.9ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "The Meadows"], ["address", "123 Meadow Lane, Springfield, IL 62701"], ["office_hours", "Monday-Friday: 9AM-6PM, Saturday: 10AM-4PM"], ["pets_allowed", true], ["has_parking", true], ["created_at", "2025-12-01 17:14:02.956247"], ["updated_at", "2025-12-01 17:14:02.956247"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (1.2ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "101"], ["created_at", "2025-12-01 17:14:02.967019"], ["updated_at", "2025-12-01 17:14:02.967019"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "102"], ["created_at", "2025-12-01 17:14:02.969659"], ["updated_at", "2025-12-01 17:14:02.969659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "201"], ["created_at", "2025-12-01 17:14:02.971486"], ["updated_at", "2025-12-01 17:14:02.971486"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.6ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 1], ["name", "202"], ["created_at", "2025-12-01 17:14:02.973402"], ["updated_at", "2025-12-01 17:14:02.973402"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 1], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (1.0ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 1], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:14:02.987872"], ["updated_at", "2025-12-01 17:14:02.987872"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 2], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 2], ["term", "12 months"], ["price", "1250.0"], ["created_at", "2025-12-01 17:14:02.991979"], ["updated_at", "2025-12-01 17:14:02.991979"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 3], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 3], ["term", "12 months"], ["price", "1300.0"], ["created_at", "2025-12-01 17:14:02.995411"], ["updated_at", "2025-12-01 17:14:02.995411"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 4], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 4], ["term", "12 months"], ["price", "1350.0"], ["created_at", "2025-12-01 17:14:02.999168"], ["updated_at", "2025-12-01 17:14:02.999168"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProperty Create (0.7ms)[0m  [1m[32mINSERT INTO "properties" ("name", "address", "office_hours", "pets_allowed", "has_parking", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Cassidy South"], ["address", "456 South Street, Springfield, IL 62702"], ["office_hours", "Monday-Friday: 8AM-7PM, Saturday: 9AM-5PM"], ["pets_allowed", false], ["has_parking", true], ["created_at", "2025-12-01 17:14:03.000545"], ["updated_at", "2025-12-01 17:14:03.000545"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 2], ["name", "A1"], ["created_at", "2025-12-01 17:14:03.002732"], ["updated_at", "2025-12-01 17:14:03.002732"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.8ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 2], ["name", "A2"], ["created_at", "2025-12-01 17:14:03.004726"], ["updated_at", "2025-12-01 17:14:03.004726"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnit Create (0.7ms)[0m  [1m[32mINSERT INTO "units" ("property_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["property_id", 2], ["name", "B1"], ["created_at", "2025-12-01 17:14:03.007065"], ["updated_at", "2025-12-01 17:14:03.007065"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 5], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 5], ["term", "12 months"], ["price", "1100.0"], ["created_at", "2025-12-01 17:14:03.010618"], ["updated_at", "2025-12-01 17:14:03.010618"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 6], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 6], ["term", "12 months"], ["price", "1150.0"], ["created_at", "2025-12-01 17:14:03.013818"], ["updated_at", "2025-12-01 17:14:03.013818"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUnitMonthlyPrice Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."unit_id" = $1 AND "unit_monthly_prices"."term" = $2 LIMIT $3[0m  [["unit_id", 7], ["term", "12 months"], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Create (0.1ms)[0m  [1m[32mINSERT INTO "unit_monthly_prices" ("unit_id", "term", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["unit_id", 7], ["term", "12 months"], ["price", "1200.0"], ["created_at", "2025-12-01 17:14:03.016874"], ["updated_at", "2025-12-01 17:14:03.016874"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "pre_movein_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "pre_movein_user@example.com"], ["created_at", "2025-12-01 17:14:03.267407"], ["updated_at", "2025-12-01 17:14:03.267407"], ["password_digest", "$2a$12$7bkvE8WtsBBTS/Xadd6.TOyviCCtczqaVfI0PVmIaM52teJAkvoM."], ["role", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (2.5ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 1], ["property_id", 1], ["unit_id", 1], ["move_in_date", "2025-01-15"], ["status", 1], ["created_at", "2025-12-01 17:14:03.279650"], ["updated_at", "2025-12-01 17:14:03.279650"], ["unit_monthly_price_id", 1], ["first_name", "Alex"], ["last_name", "Johnson"], ["date_of_birth", "1990-05-15"], ["gender", "Non-binary"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (2.7ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 1], ["property_id", 1], ["unit_id", 1], ["signed", true], ["signed_date", "2025-11-20"], ["move_in_date", "2025-01-15"], ["move_out_date", nil], ["created_at", "2025-12-01 17:14:03.292339"], ["updated_at", "2025-12-01 17:14:03.292339"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 1], ["lease_id", 1], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (1.1ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 1], ["user_id", 1], ["created_at", "2025-12-01 17:14:03.303792"], ["updated_at", "2025-12-01 17:14:03.303792"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "moved_in_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "moved_in_user@example.com"], ["created_at", "2025-12-01 17:14:03.548593"], ["updated_at", "2025-12-01 17:14:03.548593"], ["password_digest", "$2a$12$pJVv0KQXYGNDR.bdqp5F6Ofezy/bUdmYunGNaW99CYEnKE/qQiSu6"], ["role", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.2ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 2], ["property_id", 1], ["unit_id", 2], ["move_in_date", "2025-11-01"], ["status", 1], ["created_at", "2025-12-01 17:14:03.550633"], ["updated_at", "2025-12-01 17:14:03.550633"], ["unit_monthly_price_id", 2], ["first_name", "Sarah"], ["last_name", "Williams"], ["date_of_birth", "1988-08-22"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.1ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 2], ["property_id", 1], ["unit_id", 2], ["signed", true], ["signed_date", "2025-10-15"], ["move_in_date", "2025-11-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:14:03.553142"], ["updated_at", "2025-12-01 17:14:03.553142"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 2], ["lease_id", 2], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.5ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 2], ["user_id", 2], ["created_at", "2025-12-01 17:14:03.560117"], ["updated_at", "2025-12-01 17:14:03.560117"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUserProperty Create (1.2ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 2], ["property_id", 1], ["created_at", "2025-12-01 17:14:03.570786"], ["updated_at", "2025-12-01 17:14:03.570786"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (2.7ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 2], ["lease_id", 2], ["amount", "1250.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:14:03.582681"], ["updated_at", "2025-12-01 17:14:03.582681"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "loyalty_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "loyalty_user@example.com"], ["created_at", "2025-12-01 17:14:03.829950"], ["updated_at", "2025-12-01 17:14:03.829950"], ["password_digest", "$2a$12$KugN1gG5AyFs6IrQBr7RS.RKZjuKQGl1eBgpPoI7EO38XELWV/V.C"], ["role", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.0ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 3], ["property_id", 1], ["unit_id", 3], ["move_in_date", "2025-05-01"], ["status", 1], ["created_at", "2025-12-01 17:14:03.832281"], ["updated_at", "2025-12-01 17:14:03.832281"], ["unit_monthly_price_id", 3], ["first_name", "Michael"], ["last_name", "Chen"], ["date_of_birth", "1992-03-10"], ["gender", "Male"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.2ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 3], ["property_id", 1], ["unit_id", 3], ["signed", true], ["signed_date", "2025-04-20"], ["move_in_date", "2025-05-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:14:03.834772"], ["updated_at", "2025-12-01 17:14:03.834772"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 3], ["lease_id", 3], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.3ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 3], ["user_id", 3], ["created_at", "2025-12-01 17:14:03.838823"], ["updated_at", "2025-12-01 17:14:03.838823"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 3], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.4ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["property_id", 1], ["created_at", "2025-12-01 17:14:03.842564"], ["updated_at", "2025-12-01 17:14:03.842564"], ["loyalty_tier", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.2ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-06-01"], ["paid_date", "2025-06-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.844421"], ["updated_at", "2025-12-01 17:14:03.844421"], ["payment_month", "2025-06-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-07-01"], ["paid_date", "2025-07-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.847683"], ["updated_at", "2025-12-01 17:14:03.847683"], ["payment_month", "2025-07-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-08-01"], ["paid_date", "2025-08-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.850100"], ["updated_at", "2025-12-01 17:14:03.850100"], ["payment_month", "2025-08-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-09-01"], ["paid_date", "2025-09-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.852129"], ["updated_at", "2025-12-01 17:14:03.852129"], ["payment_month", "2025-09-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-10-01"], ["paid_date", "2025-10-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.854254"], ["updated_at", "2025-12-01 17:14:03.854254"], ["payment_month", "2025-10-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-11-01"], ["paid_date", "2025-11-05"], ["status", 1], ["created_at", "2025-12-01 17:14:03.857337"], ["updated_at", "2025-12-01 17:14:03.857337"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 3], ["lease_id", 3], ["amount", "1300.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:14:03.859509"], ["updated_at", "2025-12-01 17:14:03.859509"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dual_lease_user@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "dual_lease_user@example.com"], ["created_at", "2025-12-01 17:14:04.103935"], ["updated_at", "2025-12-01 17:14:04.103935"], ["password_digest", "$2a$12$cETkcgvY7TdjgqWOqOW/t.Gds1PoKCPmGK69YrdzmEJJiH9xqCVce"], ["role", nil]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (1.1ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 4], ["property_id", 1], ["unit_id", 4], ["move_in_date", "2025-09-01"], ["status", 1], ["created_at", "2025-12-01 17:14:04.106157"], ["updated_at", "2025-12-01 17:14:04.106157"], ["unit_monthly_price_id", 4], ["first_name", "Emily"], ["last_name", "Rodriguez"], ["date_of_birth", "1995-11-30"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.0ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 4], ["property_id", 1], ["unit_id", 4], ["signed", true], ["signed_date", "2025-08-25"], ["move_in_date", "2025-09-01"], ["move_out_date", nil], ["created_at", "2025-12-01 17:14:04.108675"], ["updated_at", "2025-12-01 17:14:04.108675"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 4], ["lease_id", 4], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.3ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 4], ["user_id", 4], ["created_at", "2025-12-01 17:14:04.112730"], ["updated_at", "2025-12-01 17:14:04.112730"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRentalApplication Create (0.9ms)[0m  [1m[32mINSERT INTO "rental_applications" ("user_id", "property_id", "unit_id", "move_in_date", "status", "created_at", "updated_at", "unit_monthly_price_id", "first_name", "last_name", "date_of_birth", "gender", "middle_name") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["user_id", 4], ["property_id", 2], ["unit_id", 5], ["move_in_date", "2025-10-15"], ["status", 1], ["created_at", "2025-12-01 17:14:04.114529"], ["updated_at", "2025-12-01 17:14:04.114529"], ["unit_monthly_price_id", 5], ["first_name", "Emily"], ["last_name", "Rodriguez"], ["date_of_birth", "1995-11-30"], ["gender", "Female"], ["middle_name", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLease Create (1.1ms)[0m  [1m[32mINSERT INTO "leases" ("rental_application_id", "property_id", "unit_id", "signed", "signed_date", "move_in_date", "move_out_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["rental_application_id", 5], ["property_id", 2], ["unit_id", 5], ["signed", true], ["signed_date", "2025-10-01"], ["move_in_date", "2025-10-15"], ["move_out_date", nil], ["created_at", "2025-12-01 17:14:04.119667"], ["updated_at", "2025-12-01 17:14:04.119667"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLeaseTenant Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "lease_tenants" WHERE "lease_tenants"."user_id" = $1 AND "lease_tenants"."lease_id" = $2 LIMIT $3[0m  [["user_id", 4], ["lease_id", 5], ["LIMIT", 1]]
  [1m[36mLeaseTenant Create (0.4ms)[0m  [1m[32mINSERT INTO "lease_tenants" ("lease_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["lease_id", 5], ["user_id", 4], ["created_at", "2025-12-01 17:14:04.123893"], ["updated_at", "2025-12-01 17:14:04.123893"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 4], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 4], ["property_id", 1], ["created_at", "2025-12-01 17:14:04.127399"], ["updated_at", "2025-12-01 17:14:04.127399"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 4], ["property_id", 2], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 4], ["property_id", 2], ["created_at", "2025-12-01 17:14:04.131278"], ["updated_at", "2025-12-01 17:14:04.131278"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 4], ["lease_id", 4], ["amount", "1350.0"], ["due_date", "2025-10-01"], ["paid_date", "2025-10-05"], ["status", 1], ["created_at", "2025-12-01 17:14:04.132956"], ["updated_at", "2025-12-01 17:14:04.132956"], ["payment_month", "2025-10-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 4], ["lease_id", 4], ["amount", "1350.0"], ["due_date", "2025-11-01"], ["paid_date", "2025-11-03"], ["status", 1], ["created_at", "2025-12-01 17:14:04.135164"], ["updated_at", "2025-12-01 17:14:04.135164"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 4], ["lease_id", 4], ["amount", "1350.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:14:04.137369"], ["updated_at", "2025-12-01 17:14:04.137369"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.1ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 4], ["lease_id", 5], ["amount", "1100.0"], ["due_date", "2025-11-01"], ["paid_date", "2025-11-08"], ["status", 1], ["created_at", "2025-12-01 17:14:04.139743"], ["updated_at", "2025-12-01 17:14:04.139743"], ["payment_month", "2025-11-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Create (1.1ms)[0m  [1m[32mINSERT INTO "payments" ("user_id", "lease_id", "amount", "due_date", "paid_date", "status", "created_at", "updated_at", "payment_month", "stripe_payment_intent_id", "stripe_charge_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["user_id", 4], ["lease_id", 5], ["amount", "1100.0"], ["due_date", "2025-12-01"], ["paid_date", nil], ["status", 0], ["created_at", "2025-12-01 17:14:04.142127"], ["updated_at", "2025-12-01 17:14:04.142127"], ["payment_month", "2025-12-01"], ["stripe_payment_intent_id", nil], ["stripe_charge_id", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "maintenance@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "maintenance@demo.com"], ["created_at", "2025-12-01 17:14:04.388249"], ["updated_at", "2025-12-01 17:14:04.388249"], ["password_digest", "$2a$12$FWpVAvsXjdbm4/ftbKo1tehdN11M/pGsQfhA1A/CjRvK3k.tm3Y8a"], ["role", "maintenance"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 5], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.5ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 5], ["property_id", 1], ["created_at", "2025-12-01 17:14:04.392074"], ["updated_at", "2025-12-01 17:14:04.392074"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "admin@demo.com"], ["created_at", "2025-12-01 17:14:04.636954"], ["updated_at", "2025-12-01 17:14:04.636954"], ["password_digest", "$2a$12$2qMAO4nSyRCwnQv42VibBusxHHH9XSRC0btNy6OlDnjj5VXK2V.nS"], ["role", "property_admin"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUserProperty Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 6], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUserProperty Create (0.3ms)[0m  [1m[32mINSERT INTO "user_properties" ("user_id", "property_id", "created_at", "updated_at", "loyalty_tier") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 6], ["property_id", 1], ["created_at", "2025-12-01 17:14:04.640591"], ["updated_at", "2025-12-01 17:14:04.640591"], ["loyalty_tier", 0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "superadmin@demo.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at", "password_digest", "role") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "superadmin@demo.com"], ["created_at", "2025-12-01 17:14:04.882795"], ["updated_at", "2025-12-01 17:14:04.882795"], ["password_digest", "$2a$12$89ssNuQvXs0oTFahcitrSeLEcVeZIAgDnx.X.vf.9GxlRy2BU0o5u"], ["role", "super_admin"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProperty Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "properties"[0m
  [1m[36mUnit Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "units"[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mRentalApplication Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rental_applications"[0m
  [1m[36mLease Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "leases"[0m
  [1m[36mPayment Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[36mUserProperty Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "user_properties"[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-12-01 17:14:16 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (16.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:44:in 'Api::V1::AuthController#authenticate_user'
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 0.1ms | ActiveRecord: 20.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/auth/login" for 127.0.0.1 at 2025-12-01 17:14:26 +0000
Processing by Api::V1::AuthController#login as */*
  Parameters: {"email" => "moved_in_user@example.com", "password" => "Password123!", "auth" => {"email" => "moved_in_user@example.com", "password" => "Password123!"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "moved_in_user@example.com"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:5:in 'Api::V1::AuthController#login'
Completed 200 OK in 259ms (Views: 0.1ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:14:27 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (1.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 5.5ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 17:14:27 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 17:14:29 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 17:14:29 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:14:29 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.1ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.9ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (2.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 35ms (Views: 0.1ms | ActiveRecord: 9.6ms (31 queries, 10 cached) | GC: 4.1ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:14:29 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 3.0ms (31 queries, 10 cached) | GC: 1.8ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:14:31 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-12-01 17:14:31 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.3ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
Processing by Api::V1::PaymentsController#last_paid as */*
  [1m[36mUserProperty Load (0.6ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  Parameters: {"payment" => {}}
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 32ms (Views: 0.1ms | ActiveRecord: 5.9ms (31 queries, 10 cached) | GC: 1.3ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:14:31 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUser Load (17.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mLease Load (2.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUserProperty Load (0.8ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mRentalApplication Load (1.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUnitMonthlyPrice Load (1.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUserProperty Load (0.5ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mProperty Load (1.5ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 2], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:95:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 30ms (Views: 0.1ms | ActiveRecord: 31.5ms (6 queries, 0 cached) | GC: 1.5ms)


  [1m[36mPayment Load (0.9ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-12-01 17:14:31 +0000
  [1m[36mUserProperty Load (0.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 6.9ms (31 queries, 10 cached) | GC: 1.0ms)


Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 2], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:95:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.4ms (6 queries, 0 cached) | GC: 1.3ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-12-01 17:16:55 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:44:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 16ms (Views: 0.1ms | ActiveRecord: 9.0ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 17:16:55 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-12-01 17:16:55 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#last_paid as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mLease Load (3.0ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mRentalApplication Load (4.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mProperty Load (0.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 2], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:95:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 16.5ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUserProperty Load (1.5ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.5ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 64ms (Views: 0.1ms | ActiveRecord: 30.6ms (31 queries, 10 cached) | GC: 0.0ms)


Started POST "/api/v1/payments/create_intent" for 127.0.0.1 at 2025-12-01 17:17:16 +0000
Processing by Api::V1::PaymentsController#create_intent as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/api/v1/payments_controller.rb:79:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:79:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:79:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mPayment Update (0.8ms)[0m  [1m[33mUPDATE "payments" SET "updated_at" = $1, "stripe_payment_intent_id" = $2 WHERE "payments"."id" = $3[0m  [["updated_at", "2025-12-01 17:17:16.925080"], ["stripe_payment_intent_id", "cs_test_a1CiXjTfZAJ7IP0n0PIboedj2oGv2Jtbk21zQ685kKNFYUoIzRruzT523p"], ["id", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:79:in 'block in Api::V1::PaymentsController#create_intent'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/api/v1/payments_controller.rb:79:in 'block in Api::V1::PaymentsController#create_intent'
Completed 200 OK in 863ms (Views: 0.2ms | ActiveRecord: 7.4ms (17 queries, 2 cached) | GC: 15.8ms)


Started GET "/api/v1/auth/me" for 127.0.0.1 at 2025-12-01 21:43:28 +0000
Processing by Api::V1::AuthController#me as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/auth_controller.rb:44:in 'Api::V1::AuthController#authenticate_user'
Completed 200 OK in 26ms (Views: 0.1ms | ActiveRecord: 11.2ms (1 query, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 21:43:29 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (1.3ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.9ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (2.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 48ms (Views: 0.5ms | ActiveRecord: 17.3ms (5 queries, 0 cached) | GC: 0.4ms)


Started GET "/api/v1/rental_applications" for 127.0.0.1 at 2025-12-01 21:43:29 +0000
Processing by Api::V1::RentalApplicationsController#index as */*
  Parameters: {"rental_application" => {}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mUnit Load (0.4ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" WHERE "leases"."rental_application_id" = $1[0m  [["rental_application_id", 2]]
  â†³ app/controllers/api/v1/rental_applications_controller.rb:6:in 'Enumerable#map'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.4ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:34 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (2.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.8ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.2ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 4.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:34 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.2ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.4ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.3ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 2.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:34 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (1.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (1.0ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (1.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 39ms (Views: 0.1ms | ActiveRecord: 8.7ms (31 queries, 10 cached) | GC: 2.2ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:34 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 3.6ms (31 queries, 10 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:36 +0000
Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-12-01 21:43:36 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
Processing by Api::V1::PaymentsController#last_paid as */*
  [1m[36mLease Load (0.9ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  Parameters: {"payment" => {}}
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (15.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mLease Load (3.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUserProperty Load (0.8ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 30ms (Views: 0.1ms | ActiveRecord: 6.2ms (31 queries, 10 cached) | GC: 0.0ms)


  [1m[36mRentalApplication Load (1.6ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:37 +0000
  [1m[36mUnitMonthlyPrice Load (1.4ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (1.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mPayment Load (1.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 2], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:95:in 'PaymentCalculationService#last_paid_date'
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 34.1ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/last_paid" for 127.0.0.1 at 2025-12-01 21:43:37 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (1.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Processing by Api::V1::PaymentsController#last_paid as */*
  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  Parameters: {"payment" => {}}
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mPayment Load (1.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mLease Load (0.7ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mUserProperty Load (0.7ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mRentalApplication Load (0.5ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mUnitMonthlyPrice Load (0.7ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mPayment Load (2.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mProperty Load (1.6ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mPayment Load (1.6ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."status" = $2 ORDER BY "payments"."payment_month" DESC LIMIT $3[0m  [["lease_id", 2], ["status", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  â†³ app/services/payment_calculation_service.rb:95:in 'PaymentCalculationService#last_paid_date'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 5.5ms (6 queries, 0 cached) | GC: 0.7ms)


  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.3ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.4ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 50ms (Views: 0.1ms | ActiveRecord: 13.4ms (31 queries, 10 cached) | GC: 2.6ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:38 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.6ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:38 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.3ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:38 +0000
  [1m[36mUnit Load (0.7ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.4ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.2ms (5 queries, 0 cached) | GC: 0.2ms)


Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 3.0ms (31 queries, 10 cached) | GC: 0.7ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:38 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 2.7ms (31 queries, 10 cached) | GC: 2.1ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-12-01 21:43:42 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (1.6ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 8.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/maintenance_requests" for 127.0.0.1 at 2025-12-01 21:43:42 +0000
Processing by Api::V1::MaintenanceRequestsController#index as */*
  Parameters: {"maintenance_request" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mMaintenanceRequest Load (0.5ms)[0m  [1m[34mSELECT "maintenance_requests".* FROM "maintenance_requests" WHERE "maintenance_requests"."user_id" = $1 ORDER BY "maintenance_requests"."created_at" DESC[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/maintenance_requests_controller.rb:20:in 'Enumerable#map'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:46 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.4ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.1ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/leases" for 127.0.0.1 at 2025-12-01 21:43:46 +0000
Processing by Api::V1::LeasesController#index as */*
  Parameters: {"lease" => {}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.5ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" WHERE "lease_tenants"."user_id" = $1[0m  [["user_id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mProperty Load (0.2ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mUnit Load (0.1ms)[0m  [1m[34mSELECT "units".* FROM "units" WHERE "units"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1[0m  [["id", 2]]
  â†³ app/controllers/api/v1/leases_controller.rb:7:in 'Enumerable#map'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:46 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (3.6ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.3ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.2ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 6.2ms (31 queries, 10 cached) | GC: 0.0ms)


Started GET "/api/v1/payments/outstanding" for 127.0.0.1 at 2025-12-01 21:43:46 +0000
Processing by Api::V1::PaymentsController#outstanding as */*
  Parameters: {"payment" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:10:in 'ApplicationController#authenticate_user'
  [1m[36mLease Load (0.8ms)[0m  [1m[34mSELECT "leases".* FROM "leases" INNER JOIN "lease_tenants" ON "leases"."id" = "lease_tenants"."lease_id" INNER JOIN "rental_applications" ON "rental_applications"."id" = "leases"."rental_application_id" WHERE "lease_tenants"."user_id" = $1 AND "rental_applications"."status" = $2 AND (leases.move_in_date <= $3) AND (leases.move_out_date IS NULL OR leases.move_out_date >= $4) ORDER BY "leases"."id" ASC LIMIT $5[0m  [["user_id", 2], ["status", 1], [nil, "2025-12-01"], [nil, "2025-12-01"], ["LIMIT", 1]]
  â†³ app/controllers/api/v1/payments_controller.rb:154:in 'Api::V1::PaymentsController#set_active_lease'
  [1m[36mRentalApplication Load (0.2ms)[0m  [1m[34mSELECT "rental_applications".* FROM "rental_applications" WHERE "rental_applications"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mUnitMonthlyPrice Load (0.1ms)[0m  [1m[34mSELECT "unit_monthly_prices".* FROM "unit_monthly_prices" WHERE "unit_monthly_prices"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/lease.rb:17:in 'Lease#monthly_rent'
  [1m[36mProperty Load (0.1ms)[0m  [1m[34mSELECT "properties".* FROM "properties" WHERE "properties"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:6:in 'PaymentCalculationService#initialize'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.1ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."lease_id" = $1 AND "payments"."user_id" = $2 AND "payments"."payment_month" = $3 LIMIT $4[0m  [["lease_id", 2], ["user_id", 2], ["payment_month", "2025-12-01"], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:39:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/services/payment_calculation_service.rb:45:in 'PaymentCalculationService#outstanding_payments'
  [1m[36mUserProperty Load (0.2ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
  [1m[36mCACHE UserProperty Load (0.0ms)[0m  [1m[34mSELECT "user_properties".* FROM "user_properties" WHERE "user_properties"."user_id" = $1 AND "user_properties"."property_id" = $2 LIMIT $3[0m  [["user_id", 2], ["property_id", 1], ["LIMIT", 1]]
  â†³ app/services/loyalty_tier_service.rb:52:in 'LoyaltyTierService#current_tier'
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 4.0ms (31 queries, 10 cached) | GC: 5.3ms)


